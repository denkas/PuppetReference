<!DOCTYPE html>
<html dir="ltr" lang="en-US">
  <head>
  	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  	<title>SSL Configuration: External CA Support — Documentation — Puppet Labs</title>
  	<link rel="alternate" type="application/atom+xml" title="Puppet Labs Documentation Updates" href="https://github.com/puppetlabs/puppet-docs/commits/master.atom">
    <link rel="alternate" type="application/atom+xml" title="Puppet Labs Blog Feed" href="http://puppetlabs.com/feed/">
    <link rel='index' title='Puppet Labs Documentation' href='https://docs.puppetlabs.com' />
    <link rel='icon' href='/favicon.ico' />

     
  <meta name="description" content="In lieu of its built-in CA and PKI tools, Puppet can use an existing external CA for all of its SSL communications.This page describes the supporte...">

<!-- Google analytics -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1537572-5']);
  _gaq.push(['_setDomainName', 'puppetlabs.com']);
  _gaq.push(['_addIgnoredRef', 'puppetlabs.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })();
</script>
<!-- End Google analytics -->


    <!-- FIXME: absolute paths -->

    <script type='text/javascript' src='/files/javascripts/html5.js'></script>
    <script type='text/javascript' src='/files/javascripts/jquery-1.11.1.min.js'></script>
    <script type='text/javascript' src='/files/javascripts/drop_down.js'></script>
    <script type='text/javascript' src='/files/javascripts/navigation-accordion.js'></script>

    <script type="text/javascript" src="https://puppetlabs.com/sites/all/themes/puppetlabs/js/leadcapture.js"></script>

    <!-- All in One SEO Pack 1.6.10.1 by Michael Torbert of Semper Fi Web Design[127,146] -->
    <meta name="keywords" content="Puppet, puppet labs, reductive labs, open source, system administrator, ruby, data center, automation, support" />
    <!-- /all in one seo pack -->

    <!-- Give us the option of setting a canonical URL in yaml frontmatter -NF -->
    <link rel="canonical" href="https://docs.puppetlabs.com/puppet/latest/reference/config_ssl_external_ca.html" />

    <!-- FIXME: absolute paths -->

    <link rel="stylesheet" type="text/css" href="/files/stylesheets/style.css" media="screen">
    <link rel="stylesheet" type="text/css" href="/files/stylesheets/syntax.css" media="screen"> <!-- index -->

    <!--[if IE 7]>
	  <link rel="stylesheet" type="text/css" href="/files/stylesheets/ie_7.css" media="screen"> <!-- index -->
    <![endif]-->

    <!--[if IE 8]>
	    <link rel="stylesheet" type="text/css" href="/files/stylesheets/ie_8.css" media="screen"> <!-- index -->
    <![endif]-->

    <!-- Code for hover anchor links on headers begins. Relies on jQuery. Code comes from https://github.com/bryanbraun/anchorjs -->
<script type="text/javascript" src="/files/javascripts/anchor.min.js"></script>
<link rel="stylesheet" href="/files/stylesheets/anchor.css">
<script>
$(document).ready(function(){ 
    addAnchors("#content h1"); 
    addAnchors("#content h2"); 
    addAnchors("#content h3"); 
    addAnchors("#content h4"); 
    });
</script>
<!-- Code for hover anchor links ends -->

</head>




  <body id="puppetlabsdocs" class="docs">
  <!-- Google Tag Manager -->
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PF6FV6"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-PF6FV6');</script>
  <!-- End Google Tag Manager -->
  <style type="text/css">h1, h2{ visibility : hidden }</style>
  <!--[if IE 8]>
    <style type="text/css">h1, h2{ visibility : visible }</style>
  <![endif]-->

  	<header id="header">
      <div class="site-width">
    		<h1><a href="https://puppetlabs.com/"><span>Puppet Labs</span></a></h1>
        <a class="screen-reader-content" href="#content">Skip navigation</a>
        <nav>
    		<ul id="global-navigation">
          <li id="puppet-tab" class="with-submenu">
            <a href="https://puppetlabs.com/puppet/puppet-enterprise">
              <span>Products</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
			<li>
                <ul>
                   <a href="https://puppetlabs.com/puppet/what-is-puppet/">What is Puppet?</a>
                </ul>
              </li>
			       <li>
                <ul>
                   <a href="https://puppetlabs.com/puppet/puppet-enterprise/">Puppet Enterprise</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="https://puppetlabs.com/puppet/whats-new/">What's New in 2.5</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="https://puppetlabs.com/puppet/puppet-open-source/">Puppet Open Source</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="https://puppetlabs.com/puppet/enterprise-vs-open-source/">Enterprise vs. Open Source</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="https://forge.puppetlabs.com">Puppet Forge</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="https://puppetlabs.com/puppet/requirements/">Components &amp; Requirements</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="https://puppetlabs.com/puppet/faq/">FAQ</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="https://puppetlabs.com/puppet/how-to-buy/">How to Buy</a>
                </ul>
              </li>
            </ul>
          </li>
          <li id="solutions-tab" class="with-submenu">
            <a href="https://puppetlabs.com/solutions/">
              <span>Solutions</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-12296"><a href="https://puppetlabs.com/solutions/configuration-management/">Configuration Management</a></li>
<li class="page_item page-item-986"><a href="https://puppetlabs.com/solutions/virtualization-management/">Virtualization Management</a></li>
<li class="page_item page-item-993"><a href="https://puppetlabs.com/solutions/cloud-management/">Cloud Management</a></li>
<li class="page_item page-item-996"><a href="https://puppetlabs.com/solutions/it-compliance/">IT Compliance</a></li>
<li class="page_item page-item-9520"><a href="https://puppetlabs.com/solutions/devops/">DevOps</a></li>
<li class="page_item page-item-991"><a href="https://puppetlabs.com/solutions/manage-os-x-resources/">OS X Desktops</a></li>
            </ul>
          </li>
          <li id="services-tab" class="with-submenu">
            <a href="https://puppetlabs.com/services/">
              <span>Services</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-783"><a href="https://puppetlabs.com/services/overview/">Overview</a></li>
<li class="page_item page-item-1052"><a href="https://puppetlabs.com/services/customer-support/">Customer Support</a></li>
<li class="page_item page-item-11022"><a href="https://puppetlabs.com/services/support-plans/">Support Plans</a></li>
<li class="page_item page-item-845"><a href="https://puppetlabs.com/services/training-workshops/">On-Site Education</a></li>
<li class="page_item page-item-4899"><a href="https://puppetlabs.com/services/consulting/">Professional Services</a></li>
<li class="page_item page-item-849"><a href="https://puppetlabs.com/category/events/upcoming/">Events &amp; Workshops</a></li>
<li class="page_item page-item-851"><a href="https://puppetlabs.com/services/partners/">Partners</a></li>
            </ul>
          </li>
                    <li id="resources-tab" class="with-submenu">
            <a href="https://puppetlabs.com/resources/">
              <span>Resources</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-1048"><a href="https://puppetlabs.com/resources/overview-2/">Overview</a></li>
<li class="page_item page-item-1040"><a href="https://docs.puppetlabs.com">Documentation</a></li>
<li class="page_item page-item-872"><a href="http://info.puppetlabs.com/register-download">Downloads</a></li>
<li class="page_item page-item-1961"><a href="https://forge.puppetlabs.com">Puppet Forge</a></li>
<li class="page_item page-item-835"><a href="http://info.puppetlabs.com/download-whitepapers.html">White Papers</a></li>
<li class="page_item page-item-7279"><a href="https://puppetlabs.com/resources/webinars/">Upcoming Webinars</a></li>
<li class="page_item page-item-10183"><a href="https://puppetlabs.com/resources/newsletter/">Newsletter</a></li>
<li class="page_item page-item-12263"><a href="https://puppetlabs.com/resources/tech-notes/">Tech Notes</a></li>
<li class="page_item page-item-10265"><a href="http://info.puppetlabs.com/pe2-webinar.html">Webinars</a></li>
            </ul>
          </li>

          <li id="customers-tab" class="with-submenu">
            <a href="https://puppetlabs.com/customers/companies/">
              <span>Customers</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
			<li>
                <ul>
                  <a href="https://puppetlabs.com/customers/companies/">Companies</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="https://puppetlabs.com/customers/case-studies/">Case Studies</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="https://puppetlabs.com/customers/product-testimonials/">Product Testimonials</a>
                </ul>
              </li>
			    <li>
                <ul>
                  <a href="https://puppetlabs.com/customers/what-customers-are-saying/">Service Testimonials</a>
                </ul>
              </li>
            </ul>
          </li>
          <li id="community-tab" class="with-submenu">
            <a href="https://puppetlabs.com/community/">
              <span>Community</span>
              <span class="drop-down-trigger"></span>
            </a>

 <ul>
			<li>
                <ul>
                  <a href="https://puppetlabs.com/community/overview/">Overview</a>
                </ul>
              </li>
			<li>
                <ul>
                  <a href="https://puppetlabs.com/blog">Blog</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="https://puppetlabs.com/community/puppet-camp/">Puppet Camp</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="https://puppetlabs.com/community/user-groups-and-devops-groups/">Puppet User Groups & DevOps Groups</a>
                </ul>
              </li>
	          <li>
                <ul>
                  <a href="https://puppetlabs.com/community/presentations/">Presentations</a>
                </ul>
              </li>
			    <li>
                <ul>
                  <a href="https://puppetlabs.com/community/videos/">Videos</a>
                </ul>
              </li>
            </ul>

          <li id="company-tab" class="with-submenu">
            <a href="https://puppetlabs.com/company/">
              <span>Company</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-2316"><a href="https://puppetlabs.com/company/overview/">Overview</a></li>
<li class="page_item page-item-2179"><a href="https://puppetlabs.com/company/news/">News</a>
<ul class='children'>
	<li class="page_item page-item-2338"><a href="https://puppetlabs.com/company/news/press-releases/">Press Releases</a></li>
	<li class="page_item page-item-2383"><a href="https://puppetlabs.com/company/news/media-kit/">Media Kit</a></li>
</ul>
</li>
<li class="page_item page-item-1571"><a href="https://puppetlabs.com/company/careers/">Careers</a></li>
<li class="page_item page-item-10372"><a href="https://puppetlabs.com/company/management/">Management</a></li>
<li class="page_item page-item-10311"><a href="https://puppetlabs.com/company/board-and-advisors/">Board and Advisors</a></li>
<li class="page_item page-item-10367"><a href="https://puppetlabs.com/company/investors/">Investors</a></li>
<li class="page_item page-item-2313"><a href="https://puppetlabs.com/company/contact-us/">Contact Us</a></li>
<li class="page_item page-item-10579"><a href="https://puppetlabs.com/company/awards/">Awards</a></li>
            </ul>
          </li>
    		</ul>
          <div id="misc-navigation">
			  <ul>
				<li><a href="https://puppetlabs.com/security/">Security</a></li>
				<li><a href="https://docs.puppetlabs.com">Documentation</a></li>
				<li><a href="https://puppetlabs.com/resources/customer-support/">Support</a></li>
			        <li><a href="https://tickets.puppetlabs.com/">Bug Tracker</a></li>
				<li><a href="https://puppetlabs.com/company/contact/contact-us">Contact Us</a></li>
				<li><a href="http://info.puppetlabs.com/download-pe2.html" class="gateway">Download</a></li>
			  </ul>
			<form action="https://www.google.com/cse" id="cse-search-box">
			  <div>
				<input type="hidden" name="cx" value="017668764424496204839:ubligvgbenm" />
				<input type="hidden" name="ie" value="UTF-8" />
				<input type="text" name="q" class="gsc-input" size="31" />
				<input type="submit" name="sa" class="searchbtn" value="Search" />
			  </div>
			</form>
			<script type="text/javascript" src="https://www.google.com/cse/brand?form=cse-search-box&lang=en"></script>
          </div>
      </nav>
    	</div>
    </header>

      <section id="masthead">
        <div class="site-width">
          <h1>Docs: <span class="section-name">SSL Configuration: External CA Support</span></h1>
        </div>
        <br />
      </section>

      <section id="content">
        <div class="site-width">
          <div class="primary-secondary-content">
            <div class="primary-content">
              <h1>SSL Configuration: External CA Support</h1>
              <nav class="in-page" id="page-nav">
<ol class="toc">
  <li class="toc-lv2"><a href="#supported-external-ca-configurations">Supported External CA Configurations</a></li>
  <li class="toc-lv2"><a href="#general-notes-and-requirements">General Notes and Requirements</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#rack-webserver-is-required">Rack Webserver is Required</a></li>
   <li class="toc-lv3"><a href="#pem-encoding-of-credentials-is-mandatory">PEM Encoding of Credentials is Mandatory</a></li>
   <li class="toc-lv3"><a href="#normal-puppet-master-certificate-requirements-still-apply">Normal Puppet Master Certificate Requirements Still Apply</a></li>
   <li class="toc-lv3"><a href="#format-of-x-client-dn-request-header">Format of X-Client-DN Request Header</a></li>
   <li class="toc-lv3"><a href="#revocation">Revocation</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#option-1-single-ca">Option 1: Single CA</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#puppet-master">Puppet Master</a></li>
   <li class="toc-lv3"><a href="#puppet-agent">Puppet Agent</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#option-2-single-intermediate-ca">Option 2: Single Intermediate CA</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#puppet-master-1">Puppet Master</a></li>
   <li class="toc-lv3"><a href="#puppet-agent-1">Puppet Agent</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#option-3-two-intermediate-cas-issued-by-one-root-ca">Option 3: Two Intermediate CAs Issued by One Root CA</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#puppet-master-2">Puppet Master</a></li>
   <li class="toc-lv3"><a href="#puppet-agent-2">Puppet Agent</a></li>
</ol></li>
</ol></nav>
              
<p>In lieu of its built-in CA and PKI tools, Puppet can use an existing external CA for all of its SSL communications.</p>

<p>This page describes the supported and tested configurations for external CAs in this version of Puppet. If you have an external CA use case that isn’t covered here, please get in touch with Puppet Labs so we can learn more about it.</p>

<blockquote>
  <p><strong>Note:</strong> This page uses RFC 2119 style semantics for MUST, SHOULD, MAY.</p>
</blockquote>

<h2 id="supported-external-ca-configurations">Supported External CA Configurations</h2>

<p>This version of Puppet supports <em>some</em> external CA configurations, but not every possible arrangement. We fully support the following setups:</p>

<ol>
  <li><a href="#option-1-single-ca">Single self-signed CA which directly issues SSL certificates.</a></li>
  <li><a href="#option-2-single-intermediate-ca">Single, intermediate CA issued by a root self-signed CA.</a>  The intermediate
CA directly issues SSL certificates; the root CA doesn’t.</li>
  <li><a href="#option-3-two-intermediate-cas-issued-by-one-root-ca">Two intermediate CAs, both issued by the same root self-signed CA.</a>
    <ul>
      <li>One intermediate CA issues SSL certificates for puppet master servers.</li>
      <li>The other intermediate CA issues SSL certificates for agent nodes.</li>
      <li>Agent certificates can’t act as servers, and master certificates can’t act as clients.</li>
    </ul>
  </li>
</ol>

<p>These are fully supported by Puppet Labs, which means:</p>

<ul>
  <li>Issues that arise in one of these three arrangements are considered <strong>bugs,</strong> and we’ll fix them ASAP.</li>
  <li>Issues that arise in any <em>other</em> external CA setup are considered <strong>feature requests,</strong> and we’ll consider whether to expand our support.</li>
</ul>

<p>These configurations are all-or-nothing rather than mix-and-match. When using an external CA, the built in Puppet CA service <strong>must</strong> be disabled and cannot be used to issue SSL certificates.</p>

<p>Additionally, Puppet cannot automatically distribute certificates in these configurations — you must have your own complete system for issuing and distributing certificates.</p>

<h2 id="general-notes-and-requirements">General Notes and Requirements</h2>

<h3 id="rack-webserver-is-required">Rack Webserver is Required</h3>

<p>The puppet master must be running inside of a Rack-enabled web server, not the built-in Webrick server.</p>

<p>In practice, this means Apache or Nginx.  We fully support any web server that can:</p>

<ul>
  <li>Terminate SSL</li>
  <li>Verify the authenticity of a client SSL certificate</li>
  <li>Set two request headers for:
    <ul>
      <li>Whether the client was verified</li>
      <li>The client’s distinguished name</li>
    </ul>
  </li>
</ul>

<h3 id="pem-encoding-of-credentials-is-mandatory">PEM Encoding of Credentials is Mandatory</h3>

<p>Puppet always expects its SSL credentials to be in <code>.pem</code> format.</p>

<h3 id="normal-puppet-master-certificate-requirements-still-apply">Normal Puppet Master Certificate Requirements Still Apply</h3>

<p>Any puppet master certificate must contain the DNS name at which agent nodes will attempt to contact that master, either as the subject CN or as a Subject Alternative Name (DNS).</p>

<h3 id="format-of-x-client-dn-request-header">Format of X-Client-DN Request Header</h3>

<p>Rack web servers must set a client request header, which the puppet master will check based on the <a href="/references/3.7.latest/configuration.html#sslclientheader"><code>ssl_client_header</code> setting</a>.</p>

<p>This header should conform to the following specifications:</p>

<ul>
  <li>The value of the client certificate DN should be in <a href="http://www.ietf.org/rfc/rfc2253.txt">RFC-2253</a> format. The format of the <code>SSL_CLIENT_S_DN</code> environment variable (set by Apache ≥ 2.2’s <code>mod_ssl</code>) is fully supported.</li>
  <li>Alternatively, the value of this request header may be in “OpenSSL” format.</li>
</ul>

<h3 id="revocation">Revocation</h3>

<p>Certificate revocation list (CRL) checking works in all three supported
configurations, so long as the CRL file is distributed to the agents and masters
using an “out of band” process.  Puppet won’t automatically update the CRL on any
of the components in the system.</p>

<h4 id="if-unused">If Unused:</h4>

<p>If revocation lists are <strong>not</strong> being used by the external CA, you must disable CRL checking on the agent.
Set <code>certificate_revocation = false</code> in the
<code>[agent]</code> section of <a href="./config_file_main.html">puppet.conf</a> on <strong>every agent node.</strong></p>

<p>(If it’s not set to false and the agent doesn’t already have a CRL file, it will try to download one from the master. This will fail, because the master must have the CA service disabled.)</p>

<h4 id="if-used">If Used:</h4>

<p>If revocation lists <strong>are</strong> being used by the external CA, then the CRL file must
be manually distributed to <strong>every agent node</strong> as a PEM encoded bundle.  Puppet will not automatically distribute this file.</p>

<p>To determine where to put the CRL file, run <code>puppet agent --configprint hostcrl</code>.</p>

<h2 id="option-1-single-ca">Option 1: Single CA</h2>

<p>A single CA is the default configuration of Puppet when the internal CA is
being used.  A single, externally issued CA may also be used in a similar
manner.</p>

<pre><code>               +------------------------+
               |                        |
               |  Root self-signed CA   |
               |                        |
               +------+----------+------+
                      |          |
           +----------+          +------------+
           |                                  |
           v                                  v
  +-----------------+                +----------------+
  |                 |                |                |
  | Master SSL Cert |                | Agent SSL Cert |
  |                 |                |                |
  +-----------------+                +----------------+
</code></pre>

<h3 id="puppet-master">Puppet Master</h3>

<p>Configure the puppet master in four steps:</p>

<ol>
  <li>Disable the internal CA service</li>
  <li>Ensure that the certname will never change</li>
  <li>Put certificates/keys in place on disk</li>
  <li>Configure the web server</li>
</ol>

<p>On the master, in <a href="./config_file_main.html"><code>puppet.conf</code></a>, make sure the following settings are configured:</p>

<pre><code>[master]
ca = false
certname = &lt;some static string, e.g. 'puppetmaster'&gt;
</code></pre>

<ul>
  <li>The internal CA service must be disabled using <code>ca = false</code>.</li>
  <li>The certname must be set to a static value. This can still be the machine’s FQDN, but you must not leave the setting blank. (A static certname will keep Puppet from getting confused if the machine’s hostname ever changes.)</li>
</ul>

<p>Once this configuration is set, put the external credentials into the correct filesystem locations.  You can run the following commands to find the appropriate locations:</p>

<table>
  <thead>
    <tr>
      <th>Credential</th>
      <th>File location</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Master SSL certificate</td>
      <td><code>puppet master --configprint hostcert</code></td>
    </tr>
    <tr>
      <td>Master SSL certificate private key</td>
      <td><code>puppet master --configprint hostprivkey</code></td>
    </tr>
    <tr>
      <td>Root CA certificate</td>
      <td><code>puppet master --configprint localcacert</code></td>
    </tr>
  </tbody>
</table>

<p>With these files in place, the web server should be configured to:</p>

<ul>
  <li>Use the root CA certificate, the master’s certificate, and the master’s key</li>
  <li>Set the verification header (as specified in the master’s <a href="/references/3.7.latest/configuration.html#sslclientverifyheader"><code>ssl_client_verify_header</code> setting</a>)</li>
  <li>Set the client DN header (as specified in the master’s <a href="/references/3.7.latest/configuration.html#sslclientheader"><code>ssl_client_header</code> setting</a>)</li>
</ul>

<p>An example of this configuration for Apache:</p>

<pre><code>Listen 8140
&lt;VirtualHost *:8140&gt;
    SSLEngine on
    SSLProtocol ALL -SSLv2
    SSLCipherSuite ALL:!ADH:RC4+RSA:+HIGH:+MEDIUM:-LOW:-SSLv2:-EXP

    # Replace with the value of `puppet master --configprint hostcert`
    SSLCertificateFile "/path/to/master.pem"
    # Replace with the value of `puppet master --configprint hostprivkey`
    SSLCertificateKeyFile "/path/to/master.key"

    # Replace with the value of `puppet master --configprint localcacert`
    SSLCACertificateFile "/path/to/ca.pem"

    SSLVerifyClient optional
    SSLVerifyDepth 1
    SSLOptions +StdEnvVars
    RequestHeader set X-SSL-Subject %{SSL_CLIENT_S_DN}e
    RequestHeader set X-Client-DN %{SSL_CLIENT_S_DN}e
    RequestHeader set X-Client-Verify %{SSL_CLIENT_VERIFY}e

    DocumentRoot "/etc/puppet/public"

    PassengerRoot /usr/share/gems/gems/passenger-3.0.17
    PassengerRuby /usr/bin/ruby

    RackAutoDetect On
    RackBaseURI /
&lt;/VirtualHost&gt;
</code></pre>

<p>The <code>config.ru</code> file for rack has no special configuration when using an
external CA.  Please follow the standard rack documentation for using Puppet
with rack.  The following example will work with this version of Puppet:</p>

<div class="highlight"><pre><code class="ruby">    <span class="vg">$0</span> <span class="o">=</span> <span class="s2">&quot;master&quot;</span>
    <span class="no">ARGV</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;--rack&quot;</span>
    <span class="no">ARGV</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;--confdir=/etc/puppet&quot;</span>
    <span class="no">ARGV</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;--vardir=/var/lib/puppet&quot;</span>
    <span class="nb">require</span> <span class="s1">&#39;puppet/util/command_line&#39;</span>
    <span class="n">run</span> <span class="no">Puppet</span><span class="o">::</span><span class="no">Util</span><span class="o">::</span><span class="no">CommandLine</span><span class="o">.</span><span class="n">new</span><span class="o">.</span><span class="n">execute</span>
</code></pre>
</div>

<h3 id="puppet-agent">Puppet Agent</h3>

<p>You don’t need to change any settings.</p>

<p>Put the external credentials into the correct filesystem locations.  You can run the following commands to find the appropriate locations:</p>

<table>
  <thead>
    <tr>
      <th>Credential</th>
      <th>File location</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Agent SSL certificate</td>
      <td><code>puppet agent --configprint hostcert</code></td>
    </tr>
    <tr>
      <td>Agent SSL certificate private key</td>
      <td><code>puppet agent --configprint hostprivkey</code></td>
    </tr>
    <tr>
      <td>Root CA certificate</td>
      <td><code>puppet agent --configprint localcacert</code></td>
    </tr>
  </tbody>
</table>

<h2 id="option-2-single-intermediate-ca">Option 2: Single Intermediate CA</h2>

<p>The single intermediate CA configuration builds from the single self-signed CA
configuration and introduces one additional intermediate CA.</p>

<pre><code>               +------------------------+
               |                        |
               |  self-signed Root CA   |
               |                        |
               +-----------+------------+
                           |
                           |
                           v
               +------------------------+
               |                        |
               |    Intermediate CA     |
               |                        |
               +------+----------+------+
                      |          |
           +----------+          +------------+
           |                                  |
           v                                  v
  +-----------------+                +----------------+
  |                 |                |                |
  | Master SSL Cert |                | Agent SSL Cert |
  |                 |                |                |
  +-----------------+                +----------------+
</code></pre>

<p>The Root CA does not issue SSL certificates in this configuration.  The
intermediate CA issues SSL certificates for clients and servers alike.</p>

<h3 id="puppet-master-1">Puppet Master</h3>

<p>Configure the puppet master in four steps:</p>

<ol>
  <li>Disable the internal CA service</li>
  <li>Ensure that the certname will never change</li>
  <li>Put certificates/keys in place on disk</li>
  <li>Configure the web server</li>
</ol>

<p>On the master, in <a href="./config_file_main.html"><code>puppet.conf</code></a>, make sure the following settings are configured:</p>

<pre><code>[master]
ca = false
certname = &lt;some static string, e.g. 'puppetmaster'&gt;
</code></pre>

<ul>
  <li>The internal CA service must be disabled using <code>ca = false</code>.</li>
  <li>The certname must be set to a static value. This can still be the machine’s FQDN, but you must not leave the setting blank. (A static certname will keep Puppet from getting confused if the machine’s hostname ever changes.)</li>
</ul>

<p>Once this configuration is set, put the external credentials into the correct filesystem locations.  You can run the following commands to find the appropriate locations:</p>

<table>
  <thead>
    <tr>
      <th>Credential</th>
      <th>File location</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Master SSL certificate</td>
      <td><code>puppet master --configprint hostcert</code></td>
    </tr>
    <tr>
      <td>Master SSL certificate private key</td>
      <td><code>puppet master --configprint hostprivkey</code></td>
    </tr>
    <tr>
      <td>Root CA certificate</td>
      <td><code>puppet master --configprint localcacert</code></td>
    </tr>
  </tbody>
</table>

<p>You must also create a <strong>CA bundle</strong> for the web server. Append <strong>the two CA certificates</strong> together; the Root CA certificate must be located after the intermediate CA certificate within the file.</p>

<pre><code>$ cat intermediate_ca.pem root_ca.pem &gt; ca_bundle.pem
</code></pre>

<p>Put this file somewhere predictable. Puppet doesn’t use it directly, but it can live alongside Puppet’s copies of the certificates.</p>

<p>With these files in place, the web server should be configured to:</p>

<ul>
  <li>Use the intermediate+Root CA bundle, the master’s certificate, and the master’s key</li>
  <li>Set the verification header (as specified in the master’s <a href="/references/3.7.latest/configuration.html#sslclientverifyheader"><code>ssl_client_verify_header</code> setting</a>)</li>
  <li>Set the client DN header (as specified in the master’s <a href="/references/3.7.latest/configuration.html#sslclientheader"><code>ssl_client_header</code> setting</a>)</li>
</ul>

<p>An example of this configuration for Apache:</p>

<pre><code>Listen 8140
&lt;VirtualHost *:8140&gt;
    SSLEngine on
    SSLProtocol ALL -SSLv2
    SSLCipherSuite ALL:!ADH:RC4+RSA:+HIGH:+MEDIUM:-LOW:-SSLv2:-EXP

    # Replace with the value of `puppet master --configprint hostcert`
    SSLCertificateFile "/path/to/master.pem"
    # Replace with the value of `puppet master --configprint hostprivkey`
    SSLCertificateKeyFile "/path/to/master.key"

    # Replace with the value of `puppet master --configprint localcacert`
    SSLCACertificateFile "/path/to/ca_bundle.pem"
    SSLCertificateChainFile "/path/to/ca_bundle.pem"

    # Allow only clients with a SSL certificate issued by the intermediate CA with
    # common name "Puppet CA"  Replace "Puppet CA" with the CN of your
    # intermediate CA certificate.
    &lt;Location /&gt;
        SSLRequire %{SSL_CLIENT_I_DN_CN} eq "Puppet CA"
    &lt;/Location&gt;

    SSLVerifyClient optional
    SSLVerifyDepth 2
    SSLOptions +StdEnvVars
    RequestHeader set X-SSL-Subject %{SSL_CLIENT_S_DN}e
    RequestHeader set X-Client-DN %{SSL_CLIENT_S_DN}e
    RequestHeader set X-Client-Verify %{SSL_CLIENT_VERIFY}e

    DocumentRoot "/etc/puppet/public"

    PassengerRoot /usr/share/gems/gems/passenger-3.0.17
    PassengerRuby /usr/bin/ruby

    RackAutoDetect On
    RackBaseURI /
&lt;/VirtualHost&gt;
</code></pre>

<p>The <code>config.ru</code> file for rack has no special configuration when using an
external CA.  Please follow the standard rack documentation for using Puppet
with rack.  The following example will work with this version of Puppet:</p>

<div class="highlight"><pre><code class="ruby">    <span class="vg">$0</span> <span class="o">=</span> <span class="s2">&quot;master&quot;</span>
    <span class="no">ARGV</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;--rack&quot;</span>
    <span class="no">ARGV</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;--confdir=/etc/puppet&quot;</span>
    <span class="no">ARGV</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;--vardir=/var/lib/puppet&quot;</span>
    <span class="nb">require</span> <span class="s1">&#39;puppet/util/command_line&#39;</span>
    <span class="n">run</span> <span class="no">Puppet</span><span class="o">::</span><span class="no">Util</span><span class="o">::</span><span class="no">CommandLine</span><span class="o">.</span><span class="n">new</span><span class="o">.</span><span class="n">execute</span>
</code></pre>
</div>

<h3 id="puppet-agent-1">Puppet Agent</h3>

<p>With an intermediate CA, puppet agent needs a modified value for <a href="/references/3.7.latest/configuration.html#sslclientcaauth">the <code>ssl_client_ca_auth</code> setting</a> in its puppet.conf:</p>

<pre><code>[agent]
ssl_client_ca_auth = $certdir/issuer.pem
</code></pre>

<p>The value should point to somewhere in the <code>$certdir</code>.</p>

<p>Put the external credentials into the correct filesystem locations.  You can run the following commands to find the appropriate locations:</p>

<table>
  <thead>
    <tr>
      <th>Credential</th>
      <th>File location</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Agent SSL certificate</td>
      <td><code>puppet agent --configprint hostcert</code></td>
    </tr>
    <tr>
      <td>Agent SSL certificate private key</td>
      <td><code>puppet agent --configprint hostprivkey</code></td>
    </tr>
    <tr>
      <td>Root CA certificate</td>
      <td><code>puppet agent --configprint localcacert</code></td>
    </tr>
    <tr>
      <td>Intermediate CA certificate</td>
      <td><code>puppet agent --configprint ssl_client_ca_auth</code></td>
    </tr>
  </tbody>
</table>

<h2 id="option-3-two-intermediate-cas-issued-by-one-root-ca">Option 3: Two Intermediate CAs Issued by One Root CA</h2>

<p>This configuration uses different CAs to issue puppet master certificates and puppet agent
certificates.  This makes them easily distinguishable, and prevents any agent certificate from being
usable for a puppet master.</p>

<pre><code>               +------------------------+
               |                        |
               |  Root self-signed CA   |
               |                        |
               +------+----------+------+
                      |          |
           +----------+          +------------+
           |                                  |
           v                                  v
  +-----------------+                +----------------+
  |                 |                |                |
  |    Master CA    |                |    Agent CA    |
  |                 |                |                |
  +--------+--------+                +--------+-------+
           |                                  |
           |                                  |
           v                                  v
  +-----------------+                +----------------+
  |                 |                |                |
  | Master SSL Cert |                | Agent SSL Cert |
  |                 |                |                |
  +-----------------+                +----------------+
</code></pre>

<p>In this configuration puppet agents are configured to only authenticate peer
certificates issued by the Master CA.  Puppet masters are configured to only
authenticate peer certificates issued by the Agent CA.</p>

<blockquote>
  <p><strong>Note:</strong> If you’re using this configuration, you can’t use the ActiveRecord inventory service backend with multiple puppet master servers. Use <a href="/puppetdb/latest">PuppetDB</a> for the inventory service instead.</p>
</blockquote>

<h3 id="puppet-master-2">Puppet Master</h3>

<p>Configure the puppet master in four steps:</p>

<ol>
  <li>Disable the internal CA service</li>
  <li>Ensure that the certname will never change</li>
  <li>Put certificates/keys in place on disk</li>
  <li>Configure the web server</li>
</ol>

<p>On the master, in <a href="./config_file_main.html"><code>puppet.conf</code></a>, make sure the following settings are configured:</p>

<pre><code>[master]
ca = false
certname = &lt;some static string, e.g. 'puppetmaster'&gt;
</code></pre>

<ul>
  <li>The internal CA service must be disabled using <code>ca = false</code>.</li>
  <li>The certname must be set to a static value. This can still be the machine’s FQDN, but you must not leave the setting blank. (A static certname will keep Puppet from getting confused if the machine’s hostname ever changes.)</li>
</ul>

<p>Once this configuration is set, put the external credentials into the correct filesystem locations.  You can run the following commands to find the appropriate locations:</p>

<table>
  <thead>
    <tr>
      <th>Credential</th>
      <th>File location</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Master SSL certificate</td>
      <td><code>puppet master --configprint hostcert</code></td>
    </tr>
    <tr>
      <td>Master SSL certificate private key</td>
      <td><code>puppet master --configprint hostprivkey</code></td>
    </tr>
    <tr>
      <td>Root CA certificate</td>
      <td><code>puppet master --configprint localcacert</code></td>
    </tr>
  </tbody>
</table>

<p>You must also create a <strong>CA bundle</strong> for the web server. Append the <strong>Agent CA certificate and Root CA certificate</strong> together; the Root CA certificate must be located after the Agent CA certificate within the file.</p>

<pre><code>$ cat agent_ca.pem root_ca.pem &gt; ca_bundle_for_master.pem
</code></pre>

<p>Put this file somewhere predictable. Puppet doesn’t use it directly, but it can live alongside Puppet’s copies of the certificates.</p>

<p>With these files in place, the web server should be configured to:</p>

<ul>
  <li>Use the Agent+Root CA bundle, the master’s certificate, and the master’s key</li>
  <li>Set the verification header (as specified in the master’s <a href="/references/3.7.latest/configuration.html#sslclientverifyheader"><code>ssl_client_verify_header</code> setting</a>)</li>
  <li>Set the client DN header (as specified in the master’s <a href="/references/3.7.latest/configuration.html#sslclientheader"><code>ssl_client_header</code> setting</a>)</li>
</ul>

<p>An example of this configuration for Apache:</p>

<pre><code>Listen 8140
&lt;VirtualHost *:8140&gt;
    SSLEngine on
    SSLProtocol ALL -SSLv2
    SSLCipherSuite ALL:!ADH:RC4+RSA:+HIGH:+MEDIUM:-LOW:-SSLv2:-EXP

    # Replace with the value of `puppet master --configprint hostcert`
    SSLCertificateFile "/path/to/master.pem"
    # Replace with the value of `puppet master --configprint hostprivkey`
    SSLCertificateKeyFile "/path/to/master.key"

    # Replace with the value of `puppet master --configprint localcacert`
    SSLCACertificateFile "/path/to/ca_bundle_for_master.pem"
    SSLCertificateChainFile "/path/to/ca_bundle_for_master.pem"

    # Allow only clients with a SSL certificate issued by the intermediate CA with
    # common name "Puppet Agent CA"  Replace "Puppet Agent CA" with the CN of your
    # Agent CA certificate.
    &lt;Location /&gt;
        SSLRequire %{SSL_CLIENT_I_DN_CN} eq "Puppet Agent CA"
    &lt;/Location&gt;

    SSLVerifyClient optional
    SSLVerifyDepth 2
    SSLOptions +StdEnvVars
    RequestHeader set X-SSL-Subject %{SSL_CLIENT_S_DN}e
    RequestHeader set X-Client-DN %{SSL_CLIENT_S_DN}e
    RequestHeader set X-Client-Verify %{SSL_CLIENT_VERIFY}e

    DocumentRoot "/etc/puppet/public"

    PassengerRoot /usr/share/gems/gems/passenger-3.0.17
    PassengerRuby /usr/bin/ruby

    RackAutoDetect On
    RackBaseURI /
&lt;/VirtualHost&gt;
</code></pre>

<p>The <code>config.ru</code> file for rack has no special configuration when using an
external CA.  Please follow the standard rack documentation for using Puppet
with rack.  The following example will work with this version of Puppet:</p>

<div class="highlight"><pre><code class="ruby">    <span class="vg">$0</span> <span class="o">=</span> <span class="s2">&quot;master&quot;</span>
    <span class="no">ARGV</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;--rack&quot;</span>
    <span class="no">ARGV</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;--confdir=/etc/puppet&quot;</span>
    <span class="no">ARGV</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;--vardir=/var/lib/puppet&quot;</span>
    <span class="nb">require</span> <span class="s1">&#39;puppet/util/command_line&#39;</span>
    <span class="n">run</span> <span class="no">Puppet</span><span class="o">::</span><span class="no">Util</span><span class="o">::</span><span class="no">CommandLine</span><span class="o">.</span><span class="n">new</span><span class="o">.</span><span class="n">execute</span>
</code></pre>
</div>

<h3 id="puppet-agent-2">Puppet Agent</h3>

<p>With split CAs, puppet agent needs a modified value for <a href="/references/3.7.latest/configuration.html#sslclientcaauth">the <code>ssl_client_ca_auth</code> setting</a> in its puppet.conf:</p>

<pre><code>[agent]
ssl_client_ca_auth = $certdir/ca_master.pem
</code></pre>

<p>The value should point to somewhere in the <code>$certdir</code>.</p>

<p>Put the external credentials into the correct filesystem locations.  You can run the following commands to find the appropriate locations:</p>

<table>
  <thead>
    <tr>
      <th>Credential</th>
      <th>File location</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Agent SSL certificate</td>
      <td><code>puppet agent --configprint hostcert</code></td>
    </tr>
    <tr>
      <td>Agent SSL certificate private key</td>
      <td><code>puppet agent --configprint hostprivkey</code></td>
    </tr>
    <tr>
      <td>Root CA certificate</td>
      <td><code>puppet agent --configprint localcacert</code></td>
    </tr>
    <tr>
      <td>Master CA certificate</td>
      <td><code>puppet agent --configprint ssl_client_ca_auth</code></td>
    </tr>
  </tbody>
</table>


              <blockquote><p style="font-size: 1.3em; text-align: center;"><a href="#content">↑ Back to top</a></p></blockquote>
            </div>
            <nav class="main">
                  <div id="subCol">
                      <ul id="doc-navigation">
                        <li class="with-submenu">
                          <a href="#">
                            <span>Docs Quick Nav</span>
                            <span class="drop-down-trigger"></span>
                          </a>
                                           <dl>
                  <dt>Home</dt>
                    <dd><a href="/">Puppet Docs Front Page</a></dd>
                  <dt>#1 Most Popular</dt>
                    <dd><a href="/references/stable/type.html">The Resource Type Reference</a></dd>
                  <dt>Puppet Enterprise</dt>
                    <dd><a href="/pe/latest/">Puppet Enterprise User's Guide (latest)</a></dd>
                    <dd><a href="/pe/latest/quick_start.html">Quick Start Guide</a></dd>
                  <dt>Puppet in General (PE &amp; Open Source)</dt>
                      <dd><a href="/puppet/latest/reference">Puppet Reference Manual (latest)</a></dd>
                      <dd><a href="/learning/">Learning Puppet</a></dd>
                      <dd><a href="/references/glossary.html">Glossary of Puppet Terms</a></dd>
                  <dt>Open Source Puppet</dt>
                    <dd><a href="/guides/install_puppet/pre_install.html">Installing</a></dd>
                    <dd><a href="/guides/install_puppet/upgrading.html">Upgrading</a></dd>
                  <dt>Facter</dt>
                      <dd><a href="/facter/latest/core_facts.html">Core Facts Reference</a></dd>
                      <dd><a href="/facter/latest/fact_overview.html">Writing Custom Facts</a></dd>
                  <dt>PuppetDB</dt>
                      <dd><a href="/puppetdb/latest">PuppetDB Manual</a></dd>
                  <dt>MCollective</dt>
                      <dd><a href="/mcollective/index.html">All MCollective Docs</a></dd>
                      <dd><a href="/mcollective/reference/index.html">References</a></dd>
                      <dd><a href="/mcollective/simplerpc/index.html">Writing Plugins</a></dd>
                </dl>

                        </li>
                      </ul>

                      <h3 id="puppet-3-7-reference-manual">Puppet 3.7 Reference Manual</h3>

<ul>
  <li><a href="./index.html">Introduction</a></li>
  <li><a href="./release_notes.html">Puppet 3.7 Release Notes</a></li>
  <li><strong>Deprecated Features</strong>
    <ul>
      <li><a href="./deprecated_summary.html">About Deprecations in This Version</a></li>
      <li><a href="./deprecated_language.html">Language Features</a></li>
      <li><a href="./deprecated_resource.html">Resource Type Features</a></li>
      <li><a href="./deprecated_api.html">Extension Points and APIs</a></li>
      <li><a href="./deprecated_command.html">Command Line Features</a></li>
      <li><a href="./deprecated_settings.html">Settings</a></li>
      <li><a href="./deprecated_windows_api.html">Breaking Changes to Private Windows APIs</a></li>
      <li><a href="./deprecated_misc.html">Other Features</a></li>
    </ul>
  </li>

  <li><a href="./system_requirements.html">System Requirements</a></li>
  <li><a href="./architecture.html">Overview of Puppet's Architecture</a></li>

  <li><strong>Puppet's Services and Tools</strong>
    <ul>
      <li><a href="./services_commands.html">Puppet's Commands</a></li>
      <li><a href="./services_commands_windows.html">Running Puppet Commands on Windows</a></li>
      <li><a href="./services_master_webrick.html">The WEBrick Puppet Master</a></li>
      <li><a href="./services_master_rack.html">The Rack Puppet Master</a></li>
      <li><a href="./services_agent_unix.html">Puppet Agent on *nix</a></li>
      <li><a href="./services_agent_windows.html">Puppet Agent on Windows</a></li>
      <li><a href="./services_apply.html">Puppet Apply</a></li>
    </ul>
  </li>

  <li><strong>The Puppet Language</strong>
    <ul>
      <li><a href="./lang_visual_index.html">Visual Index</a></li>
      <li><a href="./lang_summary.html">Basics</a></li>
      <li><a href="./lang_reserved.html">Reserved Words and Allowed Names</a></li>
      <li><a href="./lang_resources.html">Resources</a></li>
      <li><a href="./lang_windows_file_paths.html">Handling File Paths on Windows</a></li>
      <li><a href="./lang_relationships.html">Relationships and Ordering</a></li>
      <li><a href="./lang_defaults.html">Resource Defaults</a></li>
      <li><a href="./lang_variables.html">Variables</a></li>
      <li><a href="./lang_facts_and_builtin_vars.html">Facts and Built-in Variables</a></li>
      <li><a href="./lang_scope.html">Scope</a></li>
      <li><a href="./lang_conditional.html">Conditional Statements</a></li>
      <li><a href="./lang_expressions.html">Expressions</a></li>
      <li><a href="./lang_functions.html">Functions</a></li>
      <li><a href="./lang_classes.html">Classes</a></li>
      <li><a href="./lang_defined_types.html">Defined Types</a></li>
      <li><a href="./lang_containment.html">Containment</a></li>
      <li><a href="./lang_namespaces.html">Namespaces and Autoloading</a></li>
      <li><a href="./lang_collectors.html">Resource Collectors</a></li>
      <li><a href="./lang_node_definitions.html">Node Definitions</a></li>
      <li><a href="./lang_datatypes.html">Data Types</a></li>
      <li><a href="./lang_comments.html">Comments</a></li>
      <li><a href="./lang_virtual.html">Virtual Resources</a></li>
      <li><a href="./lang_exported.html">Exported Resources</a></li>
      <li><a href="./lang_tags.html">Tags</a></li>
      <li><a href="./lang_run_stages.html">Run Stages</a></li>
      <li><a href="./lang_import.html">Importing Manifest Files</a></li>
    </ul>
  </li>

  <li><strong>Modules</strong>
    <ul>
      <li><a href="./modules_fundamentals.html">Fundamentals</a></li>
      <li><a href="/guides/plugins_in_modules.html">Plugins in Modules</a></li>
      <li><a href="./modules_installing.html">Installing Modules</a></li>
      <li><a href="./modules_publishing.html">Publishing Modules on the Puppet Forge</a></li>
      <li><a href="./modules_documentation.html">Module Documentation</a></li>
    </ul>
  </li>

  <li><a href="/references/3.7.latest/type.html">The Resource Type Reference</a></li>

  <li><strong>Resource Types: Tips and Examples</strong>
    <ul>
      <li><a href="./resources_service.html">Service Resources (All OSes)</a></li>
      <li><a href="./resources_file_windows.html">File Resources (Windows)</a></li>
      <li><a href="./resources_package_windows.html">Package Resources (Windows)</a></li>
      <li><a href="./resources_user_group_windows.html">User and Group Resources (Windows)</a></li>
      <li><a href="./resources_scheduled_task_windows.html">Scheduled Task Resources (Windows)</a></li>
      <li><a href="./resources_exec_windows.html">Exec Resources (Windows)</a></li>
      <li><a href="./resources_windows_optional.html">Optional Resource Types for Windows</a></li>
    </ul>
  </li>

  <li><strong>Misc. References (Settings, Functions, HTTP, etc.)</strong>
    <ul>
      <li><a href="/references/3.7.latest/configuration.html">Settings (Configuration Reference)</a></li>
      <li><a href="/references/3.7.latest/function.html">Functions</a></li>
      <li><a href="/references/3.7.latest/metaparameter.html">Metaparameters</a></li>
      <li><a href="/references/3.7.latest/report.html">Report Handlers</a></li>
      <li><a href="/references/3.7.latest/indirection.html">Indirections and Termini</a></li>
      <li><a href="/references/3.7.latest/developer/index.html">Ruby API for Developing Extensions</a></li>
      <li><a href="/references/3.7.latest/developer/file.http_api_index.html">Puppet's HTTP API</a></li>
    </ul>
  </li>
  <li><strong>Important Directories and Files</strong>
    <ul>
      <li><a href="./dirs_confdir.html">The Main Config Directory (Confdir)</a></li>
      <li><a href="./dirs_manifest.html">The Main Manifest(s)</a></li>
      <li><a href="./dirs_modulepath.html">The Modulepath</a></li>
      <li><a href="./dirs_ssldir.html">The SSLdir</a></li>
      <li><a href="./dirs_vardir.html">The Vardir</a></li>
    </ul>
  </li>
  <li><strong>Environments</strong>
    <ul>
      <li><a href="./environments.html">About Environments</a></li>
      <li><a href="./environments_configuring.html">Configuring Directory Environments</a></li>
      <li><a href="./environments_creating.html">Creating Directory Environments</a></li>
      <li><a href="./environments_assigning.html">Assigning Environments to Nodes</a></li>
      <li><a href="./environments_classic.html">Using Config File Environments (deprecated)</a></li>
      <li><a href="./environments_suggestions.html">Suggestions for Use</a></li>
      <li><a href="./environments_limitations.html">Limitations of Environments</a></li>
      <li><a href="./environments_https.html">Environments and Puppet's HTTPS Interface</a></li>
    </ul>
  </li>
  <li><strong>Configuration</strong>
    <ul>
      <li><a href="./config_about_settings.html">About Puppet's Settings</a></li>
      <li><a href="./config_print.html">Checking Values of Settings</a></li>
      <li><a href="./config_set.html">Editing Settings on the Command Line</a></li>
      <li><a href="./config_important_settings.html">Short List of Important Settings</a></li>
      <li><a href="/references/3.7.latest/configuration.html">Complete List of Settings (Configuration Reference)</a></li>
      <li><strong>Config Files</strong>
        <ul>
          <li><a href="./config_file_main.html">puppet.conf: The Main Config File</a></li>
          <li><a href="./config_file_auth.html">The auth.conf File</a></li>
          <li><a href="./config_file_autosign.html">The autosign.conf File</a></li>
          <li><a href="./config_file_csr_attributes.html">The csr_attributes.yaml File</a></li>
          <li><a href="./config_file_device.html">The device.conf File</a></li>
          <li><a href="./config_file_environment.html">The environment.conf Files</a></li>
          <li><a href="./config_file_fileserver.html">The fileserver.conf File</a></li>
          <li><a href="./config_file_hiera.html">The hiera.yaml File</a></li>
          <li><a href="./config_file_puppetdb.html">The puppetdb.conf File</a></li>
          <li><a href="./config_file_routes.html">The routes.yaml File</a></li>
          <li><a href="./config_file_tagmail.html">The tagmail.conf File</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>SSL and Certificates</strong>
    <ul>
      <li><a href="./config_ssl_external_ca.html">Using an External CA</a></li>
      <li><a href="./ssl_autosign.html">Configuring Autosigning</a></li>
      <li><a href="./ssl_attributes_extensions.html">CSR Attributes and Certificate Extensions</a></li>
      <li><a href="./ssl_regenerate_certificates.html">Regenerating All Certificates in a Deployment</a></li>
    </ul>
  </li>

  <li><strong>Data Formats</strong>
    <ul>
      <li><a href="./format_report.html">Report Format</a></li>
    </ul>
  </li>

  <li><strong>Puppet Subsystems</strong>
    <ul>
      <li><a href="./subsystem_agent_master_comm.html">Agent/Master HTTPS Communications</a></li>
      <li><a href="./subsystem_catalog_compilation.html">Catalog Compilation</a></li>
    </ul>
  </li>
  <li><strong>Experimental Features</strong>
    <ul>
      <li><a href="./experiments_overview.html">Overview</a></li>
      <li><a href="./experiments_future.html">The Future Parser and Evaluator</a></li>
      <li><a href="./experiments_lambdas.html">Iteration and Lambdas</a></li>
      <li><a href="./experiments_msgpack.html">Msgpack Support</a></li>
      <li><a href="./experiments_cfacter.html">Native Facter</a></li>
    </ul>
  </li>
</ul>


                                                              <!-- Current promo images -->
            <hr style="margin-top: 20px; margin-bottom: 20px;">
            <div style="margin-top: 10px; padding-bottom: 10px;">
                <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Learning Puppet VM</p>

                <p style="font-size:0.9em;line-height: 1.5em;"><a href="http://info.puppetlabs.com/download-learning-puppet-VM.html">Learn Puppet</a> in a safe, convenient virtual environment - free download</p>
                <a href="http://info.puppetlabs.com/download-learning-puppet-VM.html">
                <img src="/images/learning-puppet-vm.jpg" class="Learning Puppet VM" alt="Learning Puppet VM screenshot">
                </a>
            </div>
            <div style="margin-top: 10px; padding-bottom: 10px;">
                <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Free Online Learning</p>
                <a href="https://puppetlabs.com/learn"><img src="/images/LMS_Forge_Ad.png" alt="Puppet Labs Workshop promo"></a>
            </div>
            <div style="margin-top: 10px; padding-bottom: 10px;">
                <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Download the Docs</p>
                <a href="http://info.puppetlabs.com/download-pdfs.html"><img src="/images/smallbits_small_docs.png" alt="Puppet docs download"></a>
            </div>

                  </div>
            </nav>
          </div>
        </div>
      </section>

		<footer id="footer">
      <div class="site-width">

        <div class="primary-secondary-content">
          <div class="primary-content">
            <section id="newsletter">
                 <h4>Puppet Labs is Hiring</h4>
                 <p><a href="https://puppetlabs.com/company/jobs/">Engineers, developers & consultants</a>
                  <p>
		<h4>Newsletter</h4>

              <p>Stay up to date on all things puppet</p>

				<form class="lpeRegForm formNotEmpty" method="post" enctype="application/x-www-form-urlencoded" action="https://app-h.marketo.com/index.php/leadCapture/save"; id="mktForm_1013" name="mktForm_1013">

				<label>Email Address:</label><span class='mktInput'><input class='mktFormText mktFormEmail' name="Email" id="Email" type='email' value="" maxlength='255'  /><span class='mktFormMsg'></span></span>

				<input id='mktFrmSubmit' type='submit' class='btn' style="width: auto; overflow: visible; padding-left: .25em; padding-right: .25em;" value='Subscribe' name='submitButton' onclick='formSubmit(document.getElementById("mktForm_1013")); return false;' />

				<input style='display: none;' id='mktFrmReset' type='reset' value='Clear' name='resetButton' onclick='formReset(document.getElementById("mktForm_1013")); return false;' />

				<span style="display:none;"><input type="text" name="_marketo_comments" value="" /></span>
				<input type="hidden" name="lpId" value="-1" />
				<input type="hidden" name="subId" value="100" />

				<input type="hidden" name="kw" value="" />
				<input type="hidden" name="cr" value="" />

				<input type="hidden" name="searchstr" value="" />
				<input type="hidden" name="lpurl" value="http://info.puppetlabs.com/testsubscription.html?cr={creative}&kw={keyword}"; />
				<input type="hidden" name="formid" value="1013" />
				<input type="hidden" name="returnURL" value="https://puppetlabs.com/misc/subscription-thank-you/"; />
				<input type="hidden" name="retURL" value="https://puppetlabs.com/misc/subscription-thank-you/"; />
				<input type="hidden" name="_mkt_disp" value="return" />
				<input type="hidden" name="_mkt_trk" value="" />

				</form>
				<script type="text/javascript" src="https://puppetlabs.com/sites/default/files/mktFormSupport.js"></script>

				<script type="text/javascript">
				function formSubmit(elt) {
				return Mkto.formSubmit(elt);
				}
				function formReset(elt) {
				return Mkto.formReset(elt);
				}
				</script>

<a href="http://info.puppetlabs.com/puppet-enterprise" class="fbtn">Try Puppet Enterprise FREE</a>

            </section>
            <section id="elsewhere">
              <h4>Get Involved</h4>
              <ul>

                <li class="chat"><a href="https://webchat.freenode.net/?channels=puppet" rel="external"><span class="indicator"></span><span>Chat with us on IRC</span></a></li>
		<li class="discussion"><a href="https://groups.google.com/group/puppet-dev" rel="external"><span class="indicator"></span><span>Join the Puppet Developer List</span></a></li>
                <li class="discussion"><a href="https://groups.google.com/group/puppet-users?pli=1" rel="external"><span class="indicator"></span><span>Join the Puppet User List</span></a></li>

                <li class="linkedin"><a href="http://www.linkedin.com/groups?about=&gid=696467&trk=anet_ug_grppro" rel="external"><span class="indicator"></span><span>Join the Puppet Users LinkedIn group</span></a></li>

              </ul>
		<p>
		              		<h4>Follow us&#8230;</h4>

              		<ul class="followus">


			<li><a href="http://feeds.feedburner.com/PuppetLabs" target="_blank"><img src="https://puppetlabs.com/wp-content/plugins/my-profiles/images/rss.png" border="0"></a></li>
			<li><a href="https://www.facebook.com/pages/Puppet-Labs/219089920711" target="_blank"><img src="https://puppetlabs.com/wp-content/plugins/my-profiles/images/facebook.png" border="0"></a></li>
			<li><a href="https://www.twitter.com/puppetlabs" target="_blank"><img src="https://puppetlabs.com/wp-content/plugins/my-profiles/images/twitter.png" border="0"></a></li>
			<li><a href="http://www.linkedin.com/groups?about=&amp;gid=696467&amp;trk=anet_ug_grppro" target="_blank"><img src="https://puppetlabs.com/wp-content/uploads/2011/01/LinkedIn_IN_Icon_32px.png" border="0"></a></li>    <li><a href="https://github.com/puppetlabs" target="_blank"><img src="https://puppetlabs.com/wp-content/uploads/2011/01/github_icon.png" border="0"></a></li>
			<li><a href="https://plus.google.com/112682055028218091774?rel=author" target="_blank"><img src="https://puppetlabs.com/wp-content/uploads/2013/05/google_plus32x32.png" alt="Find Us on Google+" border="0"></a></li>
					</ul>

              	</p>

            </section>
          </div>
          <div class="secondary-content">
            <section id="book-it">
              <h4>Get the book!</h4>

              <p>Written by Spencer Krum, Ben Kero, William Van Hevelingen, James Turnbull and Jeff McCune, <a href="http://www.apress.com/9781430260400" rel="nofollow">Pro Puppet, Second Edition</a> is a comprehensive and up-to-date look at Puppet and MCollective. </p>
              <a href="http://www.apress.com/9781430260400" rel="nofollow"><img src="/images/propuppet2thumb.png" height="161" width="131" alt="Pro Puppet, Second Edition" title="Pro Puppet, Second Edition"/></a>
            </section>
          </div>
        </div>
      </div>
		</footer>

    <div id="copyright">
      <div class="site-width">
        &copy; 2014 <a href="https://puppetlabs.com/" title="Puppet Labs">Puppet Labs</a> &nbsp;&nbsp;•&nbsp;&nbsp; <a href="https://puppetlabs.com/terms">Terms of Use</a>
        <span class="vcard">
         <span class="org"></span>
         <a class="email" href="mailto:info@puppetlabs.com">info@puppetlabs.com</a>

          <span class="adr">
           <span class="street-address">926 NW 13th Avenue #210</span>
           /
           <span class="locality">Portland</span>,
           <span class="region">OR</span>
           <span class="postal-code">97209</span>

          </span>

         <span class="tel">1-877-575-9775</span>
        </span>
      </div>
    </div>

  	<style type="text/css">h1, h2, .btn { visibility : visible; }</style>


<!-- BEGIN: MARKETO TRACKING -->
<!-- Per Alanna, this must be directly before the closing body tag. -->
    <script src="https://munchkin.marketo.net/munchkin.js" type="text/javascript"></script> <script>mktoMunchkin("307-QLA-991");</script>
 <!-- END: MARKETO TRACKING -->
	</body>
</html>
