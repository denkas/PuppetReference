<!DOCTYPE html>
<html dir="ltr" lang="en-US">
  <head>
  	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  	<title>Configuring Directory Environments — Documentation — Puppet Labs</title>
  	<link rel="alternate" type="application/atom+xml" title="Puppet Labs Documentation Updates" href="https://github.com/puppetlabs/puppet-docs/commits/master.atom">
    <link rel="alternate" type="application/atom+xml" title="Puppet Labs Blog Feed" href="http://puppetlabs.com/feed/">
    <link rel='index' title='Puppet Labs Documentation' href='https://docs.puppetlabs.com' />
    <link rel='icon' href='/favicon.ico' />

     
  <meta name="description" content="  Note: This page refers to Puppet 3.7, which is included with Puppet Enterprise 3.7.Before you can use directory environments, you have to configu...">

<!-- Google analytics -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1537572-5']);
  _gaq.push(['_setDomainName', 'puppetlabs.com']);
  _gaq.push(['_addIgnoredRef', 'puppetlabs.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })();
</script>
<!-- End Google analytics -->


    <!-- FIXME: absolute paths -->

    <script type='text/javascript' src='/files/javascripts/html5.js'></script>
    <script type='text/javascript' src='/files/javascripts/jquery-1.11.1.min.js'></script>
    <script type='text/javascript' src='/files/javascripts/drop_down.js'></script>
    <script type='text/javascript' src='/files/javascripts/navigation-accordion.js'></script>

    <script type="text/javascript" src="https://puppetlabs.com/sites/all/themes/puppetlabs/js/leadcapture.js"></script>

    <!-- All in One SEO Pack 1.6.10.1 by Michael Torbert of Semper Fi Web Design[127,146] -->
    <meta name="keywords" content="Puppet, puppet labs, reductive labs, open source, system administrator, ruby, data center, automation, support" />
    <!-- /all in one seo pack -->

    <!-- Give us the option of setting a canonical URL in yaml frontmatter -NF -->
    <link rel="canonical" href="https://docs.puppetlabs.com/puppet/3.7/reference/environments_configuring.html" />

    <!-- FIXME: absolute paths -->

    <link rel="stylesheet" type="text/css" href="/files/stylesheets/style.css" media="screen">
    <link rel="stylesheet" type="text/css" href="/files/stylesheets/syntax.css" media="screen"> <!-- index -->

    <!--[if IE 7]>
	  <link rel="stylesheet" type="text/css" href="/files/stylesheets/ie_7.css" media="screen"> <!-- index -->
    <![endif]-->

    <!--[if IE 8]>
	    <link rel="stylesheet" type="text/css" href="/files/stylesheets/ie_8.css" media="screen"> <!-- index -->
    <![endif]-->

    <!-- Code for hover anchor links on headers begins. Relies on jQuery. Code comes from https://github.com/bryanbraun/anchorjs -->
<script type="text/javascript" src="/files/javascripts/anchor.min.js"></script>
<link rel="stylesheet" href="/files/stylesheets/anchor.css">
<script>
$(document).ready(function(){ 
    addAnchors("#content h1"); 
    addAnchors("#content h2"); 
    addAnchors("#content h3"); 
    addAnchors("#content h4"); 
    });
</script>
<!-- Code for hover anchor links ends -->

</head>




  <body id="puppetlabsdocs" class="docs">
  <!-- Google Tag Manager -->
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PF6FV6"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-PF6FV6');</script>
  <!-- End Google Tag Manager -->
  <style type="text/css">h1, h2{ visibility : hidden }</style>
  <!--[if IE 8]>
    <style type="text/css">h1, h2{ visibility : visible }</style>
  <![endif]-->

  	<header id="header">
      <div class="site-width">
    		<h1><a href="https://puppetlabs.com/"><span>Puppet Labs</span></a></h1>
        <a class="screen-reader-content" href="#content">Skip navigation</a>
        <nav>
    		<ul id="global-navigation">
          <li id="puppet-tab" class="with-submenu">
            <a href="https://puppetlabs.com/puppet/puppet-enterprise">
              <span>Products</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
			<li>
                <ul>
                   <a href="https://puppetlabs.com/puppet/what-is-puppet/">What is Puppet?</a>
                </ul>
              </li>
			       <li>
                <ul>
                   <a href="https://puppetlabs.com/puppet/puppet-enterprise/">Puppet Enterprise</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="https://puppetlabs.com/puppet/whats-new/">What's New in 2.5</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="https://puppetlabs.com/puppet/puppet-open-source/">Puppet Open Source</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="https://puppetlabs.com/puppet/enterprise-vs-open-source/">Enterprise vs. Open Source</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="https://forge.puppetlabs.com">Puppet Forge</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="https://puppetlabs.com/puppet/requirements/">Components &amp; Requirements</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="https://puppetlabs.com/puppet/faq/">FAQ</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="https://puppetlabs.com/puppet/how-to-buy/">How to Buy</a>
                </ul>
              </li>
            </ul>
          </li>
          <li id="solutions-tab" class="with-submenu">
            <a href="https://puppetlabs.com/solutions/">
              <span>Solutions</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-12296"><a href="https://puppetlabs.com/solutions/configuration-management/">Configuration Management</a></li>
<li class="page_item page-item-986"><a href="https://puppetlabs.com/solutions/virtualization-management/">Virtualization Management</a></li>
<li class="page_item page-item-993"><a href="https://puppetlabs.com/solutions/cloud-management/">Cloud Management</a></li>
<li class="page_item page-item-996"><a href="https://puppetlabs.com/solutions/it-compliance/">IT Compliance</a></li>
<li class="page_item page-item-9520"><a href="https://puppetlabs.com/solutions/devops/">DevOps</a></li>
<li class="page_item page-item-991"><a href="https://puppetlabs.com/solutions/manage-os-x-resources/">OS X Desktops</a></li>
            </ul>
          </li>
          <li id="services-tab" class="with-submenu">
            <a href="https://puppetlabs.com/services/">
              <span>Services</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-783"><a href="https://puppetlabs.com/services/overview/">Overview</a></li>
<li class="page_item page-item-1052"><a href="https://puppetlabs.com/services/customer-support/">Customer Support</a></li>
<li class="page_item page-item-11022"><a href="https://puppetlabs.com/services/support-plans/">Support Plans</a></li>
<li class="page_item page-item-845"><a href="https://puppetlabs.com/services/training-workshops/">On-Site Education</a></li>
<li class="page_item page-item-4899"><a href="https://puppetlabs.com/services/consulting/">Professional Services</a></li>
<li class="page_item page-item-849"><a href="https://puppetlabs.com/category/events/upcoming/">Events &amp; Workshops</a></li>
<li class="page_item page-item-851"><a href="https://puppetlabs.com/services/partners/">Partners</a></li>
            </ul>
          </li>
                    <li id="resources-tab" class="with-submenu">
            <a href="https://puppetlabs.com/resources/">
              <span>Resources</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-1048"><a href="https://puppetlabs.com/resources/overview-2/">Overview</a></li>
<li class="page_item page-item-1040"><a href="https://docs.puppetlabs.com">Documentation</a></li>
<li class="page_item page-item-872"><a href="http://info.puppetlabs.com/register-download">Downloads</a></li>
<li class="page_item page-item-1961"><a href="https://forge.puppetlabs.com">Puppet Forge</a></li>
<li class="page_item page-item-835"><a href="http://info.puppetlabs.com/download-whitepapers.html">White Papers</a></li>
<li class="page_item page-item-7279"><a href="https://puppetlabs.com/resources/webinars/">Upcoming Webinars</a></li>
<li class="page_item page-item-10183"><a href="https://puppetlabs.com/resources/newsletter/">Newsletter</a></li>
<li class="page_item page-item-12263"><a href="https://puppetlabs.com/resources/tech-notes/">Tech Notes</a></li>
<li class="page_item page-item-10265"><a href="http://info.puppetlabs.com/pe2-webinar.html">Webinars</a></li>
            </ul>
          </li>

          <li id="customers-tab" class="with-submenu">
            <a href="https://puppetlabs.com/customers/companies/">
              <span>Customers</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
			<li>
                <ul>
                  <a href="https://puppetlabs.com/customers/companies/">Companies</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="https://puppetlabs.com/customers/case-studies/">Case Studies</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="https://puppetlabs.com/customers/product-testimonials/">Product Testimonials</a>
                </ul>
              </li>
			    <li>
                <ul>
                  <a href="https://puppetlabs.com/customers/what-customers-are-saying/">Service Testimonials</a>
                </ul>
              </li>
            </ul>
          </li>
          <li id="community-tab" class="with-submenu">
            <a href="https://puppetlabs.com/community/">
              <span>Community</span>
              <span class="drop-down-trigger"></span>
            </a>

 <ul>
			<li>
                <ul>
                  <a href="https://puppetlabs.com/community/overview/">Overview</a>
                </ul>
              </li>
			<li>
                <ul>
                  <a href="https://puppetlabs.com/blog">Blog</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="https://puppetlabs.com/community/puppet-camp/">Puppet Camp</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="https://puppetlabs.com/community/user-groups-and-devops-groups/">Puppet User Groups & DevOps Groups</a>
                </ul>
              </li>
	          <li>
                <ul>
                  <a href="https://puppetlabs.com/community/presentations/">Presentations</a>
                </ul>
              </li>
			    <li>
                <ul>
                  <a href="https://puppetlabs.com/community/videos/">Videos</a>
                </ul>
              </li>
            </ul>

          <li id="company-tab" class="with-submenu">
            <a href="https://puppetlabs.com/company/">
              <span>Company</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-2316"><a href="https://puppetlabs.com/company/overview/">Overview</a></li>
<li class="page_item page-item-2179"><a href="https://puppetlabs.com/company/news/">News</a>
<ul class='children'>
	<li class="page_item page-item-2338"><a href="https://puppetlabs.com/company/news/press-releases/">Press Releases</a></li>
	<li class="page_item page-item-2383"><a href="https://puppetlabs.com/company/news/media-kit/">Media Kit</a></li>
</ul>
</li>
<li class="page_item page-item-1571"><a href="https://puppetlabs.com/company/careers/">Careers</a></li>
<li class="page_item page-item-10372"><a href="https://puppetlabs.com/company/management/">Management</a></li>
<li class="page_item page-item-10311"><a href="https://puppetlabs.com/company/board-and-advisors/">Board and Advisors</a></li>
<li class="page_item page-item-10367"><a href="https://puppetlabs.com/company/investors/">Investors</a></li>
<li class="page_item page-item-2313"><a href="https://puppetlabs.com/company/contact-us/">Contact Us</a></li>
<li class="page_item page-item-10579"><a href="https://puppetlabs.com/company/awards/">Awards</a></li>
            </ul>
          </li>
    		</ul>
          <div id="misc-navigation">
			  <ul>
				<li><a href="https://puppetlabs.com/security/">Security</a></li>
				<li><a href="https://docs.puppetlabs.com">Documentation</a></li>
				<li><a href="https://puppetlabs.com/resources/customer-support/">Support</a></li>
			        <li><a href="https://tickets.puppetlabs.com/">Bug Tracker</a></li>
				<li><a href="https://puppetlabs.com/company/contact/contact-us">Contact Us</a></li>
				<li><a href="http://info.puppetlabs.com/download-pe2.html" class="gateway">Download</a></li>
			  </ul>
			<form action="https://www.google.com/cse" id="cse-search-box">
			  <div>
				<input type="hidden" name="cx" value="017668764424496204839:ubligvgbenm" />
				<input type="hidden" name="ie" value="UTF-8" />
				<input type="text" name="q" class="gsc-input" size="31" />
				<input type="submit" name="sa" class="searchbtn" value="Search" />
			  </div>
			</form>
			<script type="text/javascript" src="https://www.google.com/cse/brand?form=cse-search-box&lang=en"></script>
          </div>
      </nav>
    	</div>
    </header>

      <section id="masthead">
        <div class="site-width">
          <h1>Docs: <span class="section-name">Configuring Directory Environments</span></h1>
        </div>
        <br />
      </section>

      <section id="content">
        <div class="site-width">
          <div class="primary-secondary-content">
            <div class="primary-content">
              <h1>Configuring Directory Environments</h1>
              <nav class="in-page" id="page-nav">
<ol class="toc">
  <li class="toc-lv2"><a href="#enabling-directory-environments-in-puppet-enterprise">Enabling Directory Environments in Puppet Enterprise</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#edit-puppetconf">Edit puppet.conf</a></li>
   <li class="toc-lv3"><a href="#create-a-directory-environment">Create a Directory Environment</a></li>
   <li class="toc-lv3"><a href="#restart-the-puppet-master">Restart the Puppet Master</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#enabling-directory-environments-in-open-source-puppet">Enabling Directory Environments in Open Source Puppet</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#edit-puppetconf-1">Edit puppet.conf</a></li>
   <li class="toc-lv3"><a href="#create-a-directory-environment-1">Create a Directory Environment</a></li>
   <li class="toc-lv3"><a href="#restart-the-puppet-master-1">Restart the Puppet Master</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#global-settings-for-configuring-environments">Global Settings for Configuring Environments</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#environmentpath">environmentpath</a></li>
   <li class="toc-lv3"><a href="#basemodulepath">basemodulepath</a></li>
   <li class="toc-lv3"><a href="#defaultmanifest">default_manifest</a></li>
   <li class="toc-lv3"><a href="#disableperenvironmentmanifest">disable_per_environment_manifest</a></li>
   <li class="toc-lv3"><a href="#environmenttimeout">environment_timeout</a></li>
</ol></li>
</ol></nav>
              
<blockquote>
  <p><strong>Note:</strong> This page refers to Puppet 3.7, which is included with Puppet Enterprise 3.7.</p>
</blockquote>

<p>Before you can use directory environments, you have to configure Puppet to enable them. After enabling them, you can:</p>

<ul>
  <li><a href="./environments_creating.html">Create environments</a></li>
  <li><a href="./environments_assigning.html">Assign environments to your nodes</a></li>
</ul>

<p>For more info about what environments do, see <a href="./environments.html">About Directory Environments.</a></p>

<h2 id="enabling-directory-environments-in-puppet-enterprise">Enabling Directory Environments in Puppet Enterprise</h2>

<p>Directory environments are disabled by default in Puppet Enterprise. To enable them, you must:</p>

<ul>
  <li>Edit the config file</li>
  <li>Create at least one directory environment</li>
</ul>

<h3 id="edit-puppetconf">Edit puppet.conf</h3>

<p>Make sure the following settings are present in your <a href="./config_file_main.html">puppet.conf</a> file:</p>

<pre><code>[main]
    environmentpath = $confdir/environments
    default_manifest = $confdir/manifests
    basemodulepath = $confdir/modules:/opt/puppet/share/puppet/modules
</code></pre>

<p>The <code>environmentpath</code> setting can also be set to <a href="#about-environmentpath">another value of your choice</a>.</p>

<p>The <code>default_manifest</code> setting allows you to omit the <code>manifests</code> directory in the environments you create later.</p>

<p>The <code>basemodulepath</code> setting is already present in fresh installations of Puppet Enterprise 3.3, but if you upgraded from a previous version of PE, you must set it manually.</p>

<p><strong>The basemodulepath must include the <code>/opt/puppet/share/puppet/modules</code> directory.</strong> Puppet Enterprise uses modules from this directory to configure orchestration and other features. You can also specify other directories with global modules that should be available in all environments; see the section below about settings for more details.</p>

<p>Once you edit puppet.conf, directory environments will be enabled and config file environments will be disabled.</p>

<h3 id="create-a-directory-environment">Create a Directory Environment</h3>

<p>You must have a directory environment for <strong>every</strong> environment that <strong>any</strong> nodes are assigned to. At minimum, you should have a <code>production</code> environment. Nodes assigned to nonexistent environments cannot fetch their catalogs.</p>

<p>To create your first environment:</p>

<ul>
  <li>Create a directory named <code>/etc/puppetlabs/puppet/environments/production</code> (as well as the <code>environments</code> directory, if you haven’t already).</li>
</ul>

<p>Once the <code>production</code> environment is created, you can add modules, additional <a href="./dirs_manifest.html">main manifest</a> files, and an <a href="./config_file_environment.html">environment.conf</a> file to it.</p>

<p><strong>Note:</strong> In Puppet Enterprise 3.3, there are two statements that <strong>must</strong> exist in every environment’s main manifest: a <code>filebucket</code> resource, and a <code>File</code> resource default.</p>

<ul>
  <li>See <a href="./environments_creating.html">the page on creating directory environments</a> for full details.</li>
</ul>

<h3 id="restart-the-puppet-master">Restart the Puppet Master</h3>

<p>Restart the <code>pe-httpd</code> service to make sure the Puppet master picks up its changed configuration.</p>

<h2 id="enabling-directory-environments-in-open-source-puppet">Enabling Directory Environments in Open Source Puppet</h2>

<p>Directory environments are disabled by default. To enable them, you must:</p>

<ul>
  <li>Edit the config file</li>
  <li>Create at least one directory environment</li>
</ul>

<h3 id="edit-puppetconf-1">Edit puppet.conf</h3>

<p>To enable directory environments, set <code>environmentpath = $confdir/environments</code> (or <a href="#about-environmentpath">the value of your choice</a>) in the puppet master’s <a href="./config_file_main.html">puppet.conf</a> (in the <code>[main]</code> or <code>[master]</code> section).</p>

<p>Optionally, you can also:</p>

<ul>
  <li>Use the <code>basemodulepath</code> setting to specify global modules that should be available in all environments. Most people are fine with the default value.</li>
  <li>Use the <code>default_manifest</code> setting to either change the default per-environment manifest or set a global manifest to be used by all environments.</li>
</ul>

<p>See the section below about settings for more details.</p>

<p>Once you edit puppet.conf, directory environments will be enabled and config file environments will be disabled.</p>

<h3 id="create-a-directory-environment-1">Create a Directory Environment</h3>

<p>You must have a directory environment for <strong>every</strong> environment that <strong>any</strong> nodes are assigned to. At minimum, you should have a <code>production</code> environment. Nodes assigned to nonexistent environments cannot fetch their catalogs.</p>

<p>To create your first environment, create a directory named <code>production</code> in your environmentpath. (If a <code>production</code> directory doesn’t exist, the puppet master will try to create one when it starts up.) Once it is created, you can add modules, a <a href="./dirs_manifest.html">main manifest,</a> and an <a href="./config_file_environment.html">environment.conf</a> file to it.</p>

<ul>
  <li>See <a href="./environments_creating.html">the page on creating directory environments</a> for full details.</li>
</ul>

<h3 id="restart-the-puppet-master-1">Restart the Puppet Master</h3>

<p>Restart the web server that manages your Puppet master, to make sure the Puppet master picks up its changed configuration.</p>

<h2 id="global-settings-for-configuring-environments">Global Settings for Configuring Environments</h2>

<p>Puppet uses five settings from <a href="./config_file_main.html">puppet.conf</a> to configure the behavior of directory environments:</p>

<ul>
  <li><a href="/references/3.7.latest/configuration.html#environmentpath"><code>environmentpath</code></a> is the list of directories where Puppet will look for environments.</li>
  <li><a href="/references/3.7.latest/configuration.html#basemodulepath"><code>basemodulepath</code></a> lists directories of global modules that all environments can access by default.</li>
  <li><a href="/references/3.7.latest/configuration.html#defaultmanifest"><code>default_manifest</code></a> specifies the main manifest for any environment that doesn’t set a <code>manifest</code> value in <a href="./config_file_environment.html">environment.conf</a>.</li>
  <li><a href="/references/3.7.latest/configuration.html#disableperenvironmentmanifest"><code>disable_per_environment_manifest</code></a> lets you specify that <strong>all</strong> environments should use a shared main manifest. This requires <code>default_manifest</code> to be set to an absolute path.</li>
  <li><a href="/references/3.7.latest/configuration.html#environmenttimeout"><code>environment_timeout</code></a> sets how often the Puppet will refresh information about environments. It can be overridden per-environment.</li>
</ul>

<h3 id="environmentpath"><code>environmentpath</code></h3>

<p>The puppet master will only look for environments in certain directories, listed by <a href="/references/3.7.latest/configuration.html#environmentpath">the <code>environmentpath</code> setting</a> in puppet.conf. The recommended value for <code>environmentpath</code> is <code>$confdir/environments</code>. (<a href="./dirs_confdir.html">See here for info on the confdir</a>.)</p>

<p>If <code>environmentpath</code> isn’t set, directory environments will be disabled completely.</p>

<p>If you need to manage environments in multiple directories, you can set <code>environmentpath</code> to a colon-separated list of directories. (For example: <code>$confdir/temporary_environments:$confdir/environments</code>.) When looking for an environment, Puppet will search these directories in order, with earlier directories having precedence.</p>

<p>Note that if multiple copies a given environment exist in the <code>environmentpath</code>, Puppet will use the first one. It won’t use any contents of the other copies.</p>

<p>The <code>environmentpath</code> setting should usually be set in the <code>[main]</code> section of <a href="./config_file_main.html">puppet.conf</a>.</p>

<h3 id="basemodulepath"><code>basemodulepath</code></h3>

<p>Although environments should contain their own modules, you might want some modules to be available to all environments.</p>

<p><a href="/references/3.7.latest/configuration.html#basemodulepath">The <code>basemodulepath</code> setting</a> configures the global module directories. By default, it includes <code>$confdir/modules</code>, which is good enough for most users. The default may also include another directory for “system” modules, depending on your OS and Puppet distribution:</p>

<table>
  <thead>
    <tr>
      <th>OS and Distro</th>
      <th>Default basemodulepath</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>*nix (Puppet Enterprise)</td>
      <td><code>$confdir/modules:/opt/puppet/share/puppet/modules</code></td>
    </tr>
    <tr>
      <td>*nix (open source)</td>
      <td><code>$confdir/modules:/usr/share/puppet/modules</code></td>
    </tr>
    <tr>
      <td>Windows (PE and foss)</td>
      <td><code>$confdir\modules</code></td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p><strong>Note:</strong> In Puppet Enterprise 3.3, the <code>basemodulepath</code> must <strong>always</strong> include the <code>/opt/puppet/share/puppet/modules</code> directory.</p>

  <p>If you <strong>upgraded</strong> to Puppet Enterprise 3.3 from a previous version of PE, the default <code>basemodulepath</code> may not be set in your <a href="./config_file_main.html">puppet.conf</a> file. You will need to add <code>basemodulepath = $confdir/modules:/opt/puppet/share/puppet/modules</code> to the <code>[main]</code> section of your puppet.conf before using directory environments.</p>
</blockquote>

<p>To add additional directories containing global modules, you can set your own value for <code>basemodulepath</code>. See <a href="./dirs_modulepath.html">the page on the modulepath</a> for more details about how Puppet loads modules from the modulepath.</p>

<h3 id="defaultmanifest"><code>default_manifest</code></h3>

<p>The default <a href="./dirs_manifest.html">main manifest</a> to use for environments that don’t specify one in <a href="./config_file_environment.html">environment.conf</a>.</p>

<p>The default value of <code>default_manifest</code> is <code>./manifests</code> — that is, the environment’s own <code>manifests</code> directory. (In Puppet versions prior to 3.7, this wasn’t configurable.)</p>

<p>The value of this setting can be:</p>

<ul>
  <li>An absolute path to one manifest that all environments will share</li>
  <li>A relative path to a file or directory inside each environment’s directory</li>
</ul>

<h3 id="disableperenvironmentmanifest"><code>disable_per_environment_manifest</code></h3>

<p>Setting <code>disable_per_environment_manifest = true</code> will cause Puppet to use the same global manifest for every environment. If an environment specifies a different manifest in <a href="./config_file_environment.html">environment.conf</a>, Puppet will refuse to compile catalogs nodes in that environment (to avoid serving catalogs with potentially wrong contents).</p>

<p>This requires <code>default_manifest</code> to be an absolute path.</p>

<h3 id="environmenttimeout"><code>environment_timeout</code></h3>

<p>How long the Puppet master should cache the data it loads from an environment. You can set a default for this in <a href="./config_file_main.html">puppet.conf</a>, and can also set per-environment values in <a href="./config_file_environment.html">environment.conf</a>.</p>

<p>Defaults to three minutes. This setting can be a time interval in seconds (<code>30</code> or <code>30s</code>), minutes (<code>30m</code>), hours (<code>6h</code>), days (<code>2d</code>), or years (<code>5y</code>). This setting can also be set to <code>unlimited</code>, which causes the environment to be cached until the master is restarted.</p>

<blockquote>
  <p><strong>Note:</strong> If an environment has a timeout of more than a few minutes, you should restart your Puppet master service whenever you change that environment. <a href="./environments_limitations.html#changing-an-environment-with-a-long-timeout-requires-a-service-restart">We explain further here.</a></p>
</blockquote>

<p>Most users should be fine with the default of three minutes. To get more performance from your puppet master, you can tune the timeout for your most heavily used environments. Getting the most benefit involves a tradeoff between speed, memory usage, and responsiveness to changed files. The general best practice is:</p>

<ul>
  <li>Long-lived, slowly changing, relatively homogenous, highly populated environments (like <code>production</code> at most sites) will give the most benefit from longer timeouts. If you only make changes to an environment once or twice a day, you can set its timeout to <code>unlimited</code> and restart the Puppet master service whenever you deploy code.</li>
  <li>Rapidly changing dev environments should have short timeouts: a few seconds, or <code>0</code> if you don’t want to wait.</li>
  <li>Sparsely populated environments should have short-ish timeouts: just long enough to help out if a cluster of nodes all hit the master at once, but short enough to not waste the server’s memory. <code>3m</code> is fine.</li>
  <li>Extremely heterogeneous environments — where you have a lot of modules and each node uses a different tiny subset — will sometimes perform <em>worse</em> with a long timeout. (This can cause excessive memory usage and garbage collection without giving back any performance boost.) Give these short timeouts of <code>5s</code> to <code>10s</code>.</li>
</ul>


              <blockquote><p style="font-size: 1.3em; text-align: center;"><a href="#content">↑ Back to top</a></p></blockquote>
            </div>
            <nav class="main">
                  <div id="subCol">
                      <ul id="doc-navigation">
                        <li class="with-submenu">
                          <a href="#">
                            <span>Docs Quick Nav</span>
                            <span class="drop-down-trigger"></span>
                          </a>
                                           <dl>
                  <dt>Home</dt>
                    <dd><a href="/">Puppet Docs Front Page</a></dd>
                  <dt>#1 Most Popular</dt>
                    <dd><a href="/references/stable/type.html">The Resource Type Reference</a></dd>
                  <dt>Puppet Enterprise</dt>
                    <dd><a href="/pe/latest/">Puppet Enterprise User's Guide (latest)</a></dd>
                    <dd><a href="/pe/latest/quick_start.html">Quick Start Guide</a></dd>
                  <dt>Puppet in General (PE &amp; Open Source)</dt>
                      <dd><a href="/puppet/latest/reference">Puppet Reference Manual (latest)</a></dd>
                      <dd><a href="/learning/">Learning Puppet</a></dd>
                      <dd><a href="/references/glossary.html">Glossary of Puppet Terms</a></dd>
                  <dt>Open Source Puppet</dt>
                    <dd><a href="/guides/install_puppet/pre_install.html">Installing</a></dd>
                    <dd><a href="/guides/install_puppet/upgrading.html">Upgrading</a></dd>
                  <dt>Facter</dt>
                      <dd><a href="/facter/latest/core_facts.html">Core Facts Reference</a></dd>
                      <dd><a href="/facter/latest/fact_overview.html">Writing Custom Facts</a></dd>
                  <dt>PuppetDB</dt>
                      <dd><a href="/puppetdb/latest">PuppetDB Manual</a></dd>
                  <dt>MCollective</dt>
                      <dd><a href="/mcollective/index.html">All MCollective Docs</a></dd>
                      <dd><a href="/mcollective/reference/index.html">References</a></dd>
                      <dd><a href="/mcollective/simplerpc/index.html">Writing Plugins</a></dd>
                </dl>

                        </li>
                      </ul>

                      <h3 id="puppet-3-7-reference-manual">Puppet 3.7 Reference Manual</h3>

<ul>
  <li><a href="./index.html">Introduction</a></li>
  <li><a href="./release_notes.html">Puppet 3.7 Release Notes</a></li>
  <li><strong>Deprecated Features</strong>
    <ul>
      <li><a href="./deprecated_summary.html">About Deprecations in This Version</a></li>
      <li><a href="./deprecated_language.html">Language Features</a></li>
      <li><a href="./deprecated_resource.html">Resource Type Features</a></li>
      <li><a href="./deprecated_api.html">Extension Points and APIs</a></li>
      <li><a href="./deprecated_command.html">Command Line Features</a></li>
      <li><a href="./deprecated_settings.html">Settings</a></li>
      <li><a href="./deprecated_windows_api.html">Breaking Changes to Private Windows APIs</a></li>
      <li><a href="./deprecated_misc.html">Other Features</a></li>
    </ul>
  </li>

  <li><a href="./system_requirements.html">System Requirements</a></li>
  <li><a href="./architecture.html">Overview of Puppet's Architecture</a></li>

  <li><strong>Puppet's Services and Tools</strong>
    <ul>
      <li><a href="./services_commands.html">Puppet's Commands</a></li>
      <li><a href="./services_commands_windows.html">Running Puppet Commands on Windows</a></li>
      <li><a href="./services_master_webrick.html">The WEBrick Puppet Master</a></li>
      <li><a href="./services_master_rack.html">The Rack Puppet Master</a></li>
      <li><a href="./services_agent_unix.html">Puppet Agent on *nix</a></li>
      <li><a href="./services_agent_windows.html">Puppet Agent on Windows</a></li>
      <li><a href="./services_apply.html">Puppet Apply</a></li>
    </ul>
  </li>

  <li><strong>The Puppet Language</strong>
    <ul>
      <li><a href="./lang_visual_index.html">Visual Index</a></li>
      <li><a href="./lang_summary.html">Basics</a></li>
      <li><a href="./lang_reserved.html">Reserved Words and Allowed Names</a></li>
      <li><a href="./lang_resources.html">Resources</a></li>
      <li><a href="./lang_windows_file_paths.html">Handling File Paths on Windows</a></li>
      <li><a href="./lang_relationships.html">Relationships and Ordering</a></li>
      <li><a href="./lang_defaults.html">Resource Defaults</a></li>
      <li><a href="./lang_variables.html">Variables</a></li>
      <li><a href="./lang_facts_and_builtin_vars.html">Facts and Built-in Variables</a></li>
      <li><a href="./lang_scope.html">Scope</a></li>
      <li><a href="./lang_conditional.html">Conditional Statements</a></li>
      <li><a href="./lang_expressions.html">Expressions</a></li>
      <li><a href="./lang_functions.html">Functions</a></li>
      <li><a href="./lang_classes.html">Classes</a></li>
      <li><a href="./lang_defined_types.html">Defined Types</a></li>
      <li><a href="./lang_containment.html">Containment</a></li>
      <li><a href="./lang_namespaces.html">Namespaces and Autoloading</a></li>
      <li><a href="./lang_collectors.html">Resource Collectors</a></li>
      <li><a href="./lang_node_definitions.html">Node Definitions</a></li>
      <li><a href="./lang_datatypes.html">Data Types</a></li>
      <li><a href="./lang_comments.html">Comments</a></li>
      <li><a href="./lang_virtual.html">Virtual Resources</a></li>
      <li><a href="./lang_exported.html">Exported Resources</a></li>
      <li><a href="./lang_tags.html">Tags</a></li>
      <li><a href="./lang_run_stages.html">Run Stages</a></li>
      <li><a href="./lang_import.html">Importing Manifest Files</a></li>
    </ul>
  </li>

  <li><strong>Modules</strong>
    <ul>
      <li><a href="./modules_fundamentals.html">Fundamentals</a></li>
      <li><a href="/guides/plugins_in_modules.html">Plugins in Modules</a></li>
      <li><a href="./modules_installing.html">Installing Modules</a></li>
      <li><a href="./modules_publishing.html">Publishing Modules on the Puppet Forge</a></li>
      <li><a href="./modules_documentation.html">Module Documentation</a></li>
    </ul>
  </li>

  <li><a href="/references/3.7.latest/type.html">The Resource Type Reference</a></li>

  <li><strong>Resource Types: Tips and Examples</strong>
    <ul>
      <li><a href="./resources_service.html">Service Resources (All OSes)</a></li>
      <li><a href="./resources_file_windows.html">File Resources (Windows)</a></li>
      <li><a href="./resources_package_windows.html">Package Resources (Windows)</a></li>
      <li><a href="./resources_user_group_windows.html">User and Group Resources (Windows)</a></li>
      <li><a href="./resources_scheduled_task_windows.html">Scheduled Task Resources (Windows)</a></li>
      <li><a href="./resources_exec_windows.html">Exec Resources (Windows)</a></li>
      <li><a href="./resources_windows_optional.html">Optional Resource Types for Windows</a></li>
    </ul>
  </li>

  <li><strong>Misc. References (Settings, Functions, HTTP, etc.)</strong>
    <ul>
      <li><a href="/references/3.7.latest/configuration.html">Settings (Configuration Reference)</a></li>
      <li><a href="/references/3.7.latest/function.html">Functions</a></li>
      <li><a href="/references/3.7.latest/metaparameter.html">Metaparameters</a></li>
      <li><a href="/references/3.7.latest/report.html">Report Handlers</a></li>
      <li><a href="/references/3.7.latest/indirection.html">Indirections and Termini</a></li>
      <li><a href="/references/3.7.latest/developer/index.html">Ruby API for Developing Extensions</a></li>
      <li><a href="/references/3.7.latest/developer/file.http_api_index.html">Puppet's HTTP API</a></li>
    </ul>
  </li>
  <li><strong>Important Directories and Files</strong>
    <ul>
      <li><a href="./dirs_confdir.html">The Main Config Directory (Confdir)</a></li>
      <li><a href="./dirs_manifest.html">The Main Manifest(s)</a></li>
      <li><a href="./dirs_modulepath.html">The Modulepath</a></li>
      <li><a href="./dirs_ssldir.html">The SSLdir</a></li>
      <li><a href="./dirs_vardir.html">The Vardir</a></li>
    </ul>
  </li>
  <li><strong>Environments</strong>
    <ul>
      <li><a href="./environments.html">About Environments</a></li>
      <li><a href="./environments_configuring.html">Configuring Directory Environments</a></li>
      <li><a href="./environments_creating.html">Creating Directory Environments</a></li>
      <li><a href="./environments_assigning.html">Assigning Environments to Nodes</a></li>
      <li><a href="./environments_classic.html">Using Config File Environments (deprecated)</a></li>
      <li><a href="./environments_suggestions.html">Suggestions for Use</a></li>
      <li><a href="./environments_limitations.html">Limitations of Environments</a></li>
      <li><a href="./environments_https.html">Environments and Puppet's HTTPS Interface</a></li>
    </ul>
  </li>
  <li><strong>Configuration</strong>
    <ul>
      <li><a href="./config_about_settings.html">About Puppet's Settings</a></li>
      <li><a href="./config_print.html">Checking Values of Settings</a></li>
      <li><a href="./config_set.html">Editing Settings on the Command Line</a></li>
      <li><a href="./config_important_settings.html">Short List of Important Settings</a></li>
      <li><a href="/references/3.7.latest/configuration.html">Complete List of Settings (Configuration Reference)</a></li>
      <li><strong>Config Files</strong>
        <ul>
          <li><a href="./config_file_main.html">puppet.conf: The Main Config File</a></li>
          <li><a href="./config_file_auth.html">The auth.conf File</a></li>
          <li><a href="./config_file_autosign.html">The autosign.conf File</a></li>
          <li><a href="./config_file_csr_attributes.html">The csr_attributes.yaml File</a></li>
          <li><a href="./config_file_device.html">The device.conf File</a></li>
          <li><a href="./config_file_environment.html">The environment.conf Files</a></li>
          <li><a href="./config_file_fileserver.html">The fileserver.conf File</a></li>
          <li><a href="./config_file_hiera.html">The hiera.yaml File</a></li>
          <li><a href="./config_file_puppetdb.html">The puppetdb.conf File</a></li>
          <li><a href="./config_file_routes.html">The routes.yaml File</a></li>
          <li><a href="./config_file_tagmail.html">The tagmail.conf File</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>SSL and Certificates</strong>
    <ul>
      <li><a href="./config_ssl_external_ca.html">Using an External CA</a></li>
      <li><a href="./ssl_autosign.html">Configuring Autosigning</a></li>
      <li><a href="./ssl_attributes_extensions.html">CSR Attributes and Certificate Extensions</a></li>
      <li><a href="./ssl_regenerate_certificates.html">Regenerating All Certificates in a Deployment</a></li>
    </ul>
  </li>

  <li><strong>Data Formats</strong>
    <ul>
      <li><a href="./format_report.html">Report Format</a></li>
    </ul>
  </li>

  <li><strong>Puppet Subsystems</strong>
    <ul>
      <li><a href="./subsystem_agent_master_comm.html">Agent/Master HTTPS Communications</a></li>
      <li><a href="./subsystem_catalog_compilation.html">Catalog Compilation</a></li>
    </ul>
  </li>
  <li><strong>Experimental Features</strong>
    <ul>
      <li><a href="./experiments_overview.html">Overview</a></li>
      <li><a href="./experiments_future.html">The Future Parser and Evaluator</a></li>
      <li><a href="./experiments_lambdas.html">Iteration and Lambdas</a></li>
      <li><a href="./experiments_msgpack.html">Msgpack Support</a></li>
      <li><a href="./experiments_cfacter.html">Native Facter</a></li>
    </ul>
  </li>
</ul>


                                                              <!-- Current promo images -->
            <hr style="margin-top: 20px; margin-bottom: 20px;">
            <div style="margin-top: 10px; padding-bottom: 10px;">
                <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Learning Puppet VM</p>

                <p style="font-size:0.9em;line-height: 1.5em;"><a href="http://info.puppetlabs.com/download-learning-puppet-VM.html">Learn Puppet</a> in a safe, convenient virtual environment - free download</p>
                <a href="http://info.puppetlabs.com/download-learning-puppet-VM.html">
                <img src="/images/learning-puppet-vm.jpg" class="Learning Puppet VM" alt="Learning Puppet VM screenshot">
                </a>
            </div>
            <div style="margin-top: 10px; padding-bottom: 10px;">
                <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Free Online Learning</p>
                <a href="https://puppetlabs.com/learn"><img src="/images/LMS_Forge_Ad.png" alt="Puppet Labs Workshop promo"></a>
            </div>
            <div style="margin-top: 10px; padding-bottom: 10px;">
                <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Download the Docs</p>
                <a href="http://info.puppetlabs.com/download-pdfs.html"><img src="/images/smallbits_small_docs.png" alt="Puppet docs download"></a>
            </div>

                  </div>
            </nav>
          </div>
        </div>
      </section>

		<footer id="footer">
      <div class="site-width">

        <div class="primary-secondary-content">
          <div class="primary-content">
            <section id="newsletter">
                 <h4>Puppet Labs is Hiring</h4>
                 <p><a href="https://puppetlabs.com/company/jobs/">Engineers, developers & consultants</a>
                  <p>
		<h4>Newsletter</h4>

              <p>Stay up to date on all things puppet</p>

				<form class="lpeRegForm formNotEmpty" method="post" enctype="application/x-www-form-urlencoded" action="https://app-h.marketo.com/index.php/leadCapture/save"; id="mktForm_1013" name="mktForm_1013">

				<label>Email Address:</label><span class='mktInput'><input class='mktFormText mktFormEmail' name="Email" id="Email" type='email' value="" maxlength='255'  /><span class='mktFormMsg'></span></span>

				<input id='mktFrmSubmit' type='submit' class='btn' style="width: auto; overflow: visible; padding-left: .25em; padding-right: .25em;" value='Subscribe' name='submitButton' onclick='formSubmit(document.getElementById("mktForm_1013")); return false;' />

				<input style='display: none;' id='mktFrmReset' type='reset' value='Clear' name='resetButton' onclick='formReset(document.getElementById("mktForm_1013")); return false;' />

				<span style="display:none;"><input type="text" name="_marketo_comments" value="" /></span>
				<input type="hidden" name="lpId" value="-1" />
				<input type="hidden" name="subId" value="100" />

				<input type="hidden" name="kw" value="" />
				<input type="hidden" name="cr" value="" />

				<input type="hidden" name="searchstr" value="" />
				<input type="hidden" name="lpurl" value="http://info.puppetlabs.com/testsubscription.html?cr={creative}&kw={keyword}"; />
				<input type="hidden" name="formid" value="1013" />
				<input type="hidden" name="returnURL" value="https://puppetlabs.com/misc/subscription-thank-you/"; />
				<input type="hidden" name="retURL" value="https://puppetlabs.com/misc/subscription-thank-you/"; />
				<input type="hidden" name="_mkt_disp" value="return" />
				<input type="hidden" name="_mkt_trk" value="" />

				</form>
				<script type="text/javascript" src="https://puppetlabs.com/sites/default/files/mktFormSupport.js"></script>

				<script type="text/javascript">
				function formSubmit(elt) {
				return Mkto.formSubmit(elt);
				}
				function formReset(elt) {
				return Mkto.formReset(elt);
				}
				</script>

<a href="http://info.puppetlabs.com/puppet-enterprise" class="fbtn">Try Puppet Enterprise FREE</a>

            </section>
            <section id="elsewhere">
              <h4>Get Involved</h4>
              <ul>

                <li class="chat"><a href="https://webchat.freenode.net/?channels=puppet" rel="external"><span class="indicator"></span><span>Chat with us on IRC</span></a></li>
		<li class="discussion"><a href="https://groups.google.com/group/puppet-dev" rel="external"><span class="indicator"></span><span>Join the Puppet Developer List</span></a></li>
                <li class="discussion"><a href="https://groups.google.com/group/puppet-users?pli=1" rel="external"><span class="indicator"></span><span>Join the Puppet User List</span></a></li>

                <li class="linkedin"><a href="http://www.linkedin.com/groups?about=&gid=696467&trk=anet_ug_grppro" rel="external"><span class="indicator"></span><span>Join the Puppet Users LinkedIn group</span></a></li>

              </ul>
		<p>
		              		<h4>Follow us&#8230;</h4>

              		<ul class="followus">


			<li><a href="http://feeds.feedburner.com/PuppetLabs" target="_blank"><img src="https://puppetlabs.com/wp-content/plugins/my-profiles/images/rss.png" border="0"></a></li>
			<li><a href="https://www.facebook.com/pages/Puppet-Labs/219089920711" target="_blank"><img src="https://puppetlabs.com/wp-content/plugins/my-profiles/images/facebook.png" border="0"></a></li>
			<li><a href="https://www.twitter.com/puppetlabs" target="_blank"><img src="https://puppetlabs.com/wp-content/plugins/my-profiles/images/twitter.png" border="0"></a></li>
			<li><a href="http://www.linkedin.com/groups?about=&amp;gid=696467&amp;trk=anet_ug_grppro" target="_blank"><img src="https://puppetlabs.com/wp-content/uploads/2011/01/LinkedIn_IN_Icon_32px.png" border="0"></a></li>    <li><a href="https://github.com/puppetlabs" target="_blank"><img src="https://puppetlabs.com/wp-content/uploads/2011/01/github_icon.png" border="0"></a></li>
			<li><a href="https://plus.google.com/112682055028218091774?rel=author" target="_blank"><img src="https://puppetlabs.com/wp-content/uploads/2013/05/google_plus32x32.png" alt="Find Us on Google+" border="0"></a></li>
					</ul>

              	</p>

            </section>
          </div>
          <div class="secondary-content">
            <section id="book-it">
              <h4>Get the book!</h4>

              <p>Written by Spencer Krum, Ben Kero, William Van Hevelingen, James Turnbull and Jeff McCune, <a href="http://www.apress.com/9781430260400" rel="nofollow">Pro Puppet, Second Edition</a> is a comprehensive and up-to-date look at Puppet and MCollective. </p>
              <a href="http://www.apress.com/9781430260400" rel="nofollow"><img src="/images/propuppet2thumb.png" height="161" width="131" alt="Pro Puppet, Second Edition" title="Pro Puppet, Second Edition"/></a>
            </section>
          </div>
        </div>
      </div>
		</footer>

    <div id="copyright">
      <div class="site-width">
        &copy; 2014 <a href="https://puppetlabs.com/" title="Puppet Labs">Puppet Labs</a> &nbsp;&nbsp;•&nbsp;&nbsp; <a href="https://puppetlabs.com/terms">Terms of Use</a>
        <span class="vcard">
         <span class="org"></span>
         <a class="email" href="mailto:info@puppetlabs.com">info@puppetlabs.com</a>

          <span class="adr">
           <span class="street-address">926 NW 13th Avenue #210</span>
           /
           <span class="locality">Portland</span>,
           <span class="region">OR</span>
           <span class="postal-code">97209</span>

          </span>

         <span class="tel">1-877-575-9775</span>
        </span>
      </div>
    </div>

  	<style type="text/css">h1, h2, .btn { visibility : visible; }</style>


<!-- BEGIN: MARKETO TRACKING -->
<!-- Per Alanna, this must be directly before the closing body tag. -->
    <script src="https://munchkin.marketo.net/munchkin.js" type="text/javascript"></script> <script>mktoMunchkin("307-QLA-991");</script>
 <!-- END: MARKETO TRACKING -->
	</body>
</html>
